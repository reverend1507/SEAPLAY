<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeePlay - World's Best Casino App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        :root {
            --primary: #1a237e;
            --secondary: #00b0ff;
            --accent: #ff4081;
            --dark: #0d1b2a;
            --light: #f5f5f5;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --gray: #9e9e9e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            overflow-x: hidden;
        }
        
        .container {
            max-width: 480px;
            margin: 0 auto;
            background-color: var(--dark);
            min-height: 100vh;
            position: relative;
            padding-bottom: 70px;
        }
        
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 28px;
        }
        
        .time-display {
            font-size: 14px;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        .winning-users {
            margin-top: 10px;
            font-size: 12px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .winning-user {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Main Content */
        .main-content {
            padding: 15px;
        }
        
        /* Balance Card */
        .balance-card {
            background: linear-gradient(135deg, var(--primary), #3949ab);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        .balance-title {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .balance-amount {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .balance-stats {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 14px;
        }
        
        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
        }
        
        .nav-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .nav-tab.active {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0 15px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
        }
        
        .view-all {
            font-size: 14px;
            color: var(--secondary);
        }
        
        /* Games Grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .game-card {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px 10px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .game-icon {
            font-size: 24px;
            margin-bottom: 8px;
            color: var(--secondary);
        }
        
        .game-name {
            font-size: 12px;
            font-weight: 500;
        }
        
        /* Sports Section */
        .sports-container {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .sport-match {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
        }
        
        .match-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 14px;
            opacity: 0.8;
        }
        
        .match-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .team {
            text-align: center;
            flex: 1;
        }
        
        .team-name {
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .team-flag {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            margin: 0 auto 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .vs {
            font-weight: bold;
            margin: 0 10px;
        }
        
        .match-odds {
            display: flex;
            justify-content: space-between;
        }
        
        .odd {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 8px 0;
            text-align: center;
            flex: 1;
            margin: 0 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .odd:hover {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        /* Promo Banner */
        .promo-banner {
            background: linear-gradient(135deg, var(--accent), #ff79a6);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        .promo-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .promo-subtitle {
            font-size: 14px;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .promo-button {
            background-color: var(--light);
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .promo-button:hover {
            transform: scale(1.05);
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(13, 27, 42, 0.95);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            max-width: 480px;
            margin: 0 auto;
        }
        
        .nav-item {
            text-align: center;
            color: var(--gray);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
        }
        
        .nav-item.active {
            color: var(--secondary);
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        /* Auth Screens */
        .auth-screen {
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        
        .auth-logo {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .auth-form {
            width: 100%;
            max-width: 350px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--light);
            font-size: 16px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .auth-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .auth-link {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
        }
        
        .auth-link a {
            color: var(--secondary);
            text-decoration: none;
        }
        
        /* Game Screens */
        .game-screen {
            padding: 15px;
            min-height: 100vh;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .game-title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .game-balance {
            font-size: 18px;
            font-weight: bold;
        }
        
        .game-area {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .bet-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .bet-amount {
            font-size: 18px;
            font-weight: bold;
        }
        
        .bet-button {
            background-color: var(--secondary);
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .bet-button:hover {
            transform: scale(1.05);
        }
        
        .bet-button:disabled {
            background-color: var(--gray);
            cursor: not-allowed;
        }
        
        /* Aviator Specific */
        .aviator-plane {
            font-size: 48px;
            position: absolute;
            transition: all 0.1s linear;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .aviator-multiplier {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 20px;
            z-index: 10;
        }
        
        .aviator-cashout {
            font-size: 18px;
            margin-bottom: 10px;
            z-index: 10;
        }
        
        .aviator-players {
            position: absolute;
            bottom: 10px;
            left: 10px;
            font-size: 12px;
            background: rgba(0,0,0,0.7);
            padding: 5px 10px;
            border-radius: 10px;
        }
        
        .aviator-history {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            overflow-x: auto;
            padding: 10px 0;
        }
        
        .history-item {
            background: rgba(255,255,255,0.1);
            padding: 5px 10px;
            border-radius: 8px;
            font-size: 12px;
        }
        
        /* Mines Specific */
        .mines-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mine-cell {
            width: 50px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mine-cell.revealed {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .mine-cell.mine {
            background-color: var(--danger);
        }
        
        .mine-cell.gem {
            background-color: var(--success);
        }
        
        .mines-settings {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .mines-setting {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .mines-setting-label {
            font-size: 12px;
            margin-bottom: 5px;
            opacity: 0.8;
        }
        
        .mines-setting-value {
            font-size: 16px;
            font-weight: bold;
        }
        
        .mines-setting-controls {
            display: flex;
            gap: 10px;
        }
        
        .mines-control-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--light);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        /* Dice Game */
        .dice-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .dice {
            width: 100px;
            height: 100px;
            background-color: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: black;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .dice-bet-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .dice-bet-option {
            padding: 10px 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .dice-bet-option.active {
            background: var(--secondary);
            color: var(--dark);
        }
        
        /* Roulette Game */
        .roulette-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .roulette-wheel {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(
                red 0deg 15deg,
                black 15deg 30deg,
                red 30deg 45deg,
                black 45deg 60deg,
                red 60deg 75deg,
                black 75deg 90deg,
                red 90deg 105deg,
                black 105deg 120deg,
                red 120deg 135deg,
                black 135deg 150deg,
                red 150deg 165deg,
                black 165deg 180deg,
                red 180deg 195deg,
                black 195deg 210deg,
                red 210deg 225deg,
                black 225deg 240deg,
                red 240deg 255deg,
                black 255deg 270deg,
                red 270deg 285deg,
                black 285deg 300deg,
                red 300deg 315deg,
                black 315deg 330deg,
                red 330deg 345deg,
                black 345deg 360deg
            );
            position: relative;
            animation: none;
        }
        
        .roulette-pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 20px solid var(--secondary);
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .roulette-bet-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .roulette-bet-option {
            padding: 10px 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .roulette-bet-option.active {
            background: var(--secondary);
            color: var(--dark);
        }
        
        /* Sports Game */
        .sports-game-area {
            text-align: center;
        }
        
        .score-display {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .match-time {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .match-events {
            font-size: 14px;
            margin-bottom: 15px;
            min-height: 40px;
        }
        
        /* Admin Panel */
        .admin-panel {
            padding: 15px;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .admin-title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .admin-stat {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .admin-stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .admin-stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .admin-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .admin-action {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            padding: 12px;
            color: var(--light);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .admin-action:hover {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        .users-list {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-weight: bold;
        }
        
        .user-email {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .user-balance {
            font-weight: bold;
            margin-right: 10px;
        }
        
        .user-actions {
            display: flex;
            gap: 5px;
        }
        
        .user-action {
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            padding: 5px;
        }
        
        /* Profile Page */
        .profile-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 15px;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .profile-email {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .profile-stat {
            text-align: center;
        }
        
        .profile-stat-value {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .profile-stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        /* Referral Section */
        .referral-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .referral-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .referral-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        /* Transaction History */
        .transaction-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .transaction-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .transaction-tab {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .transaction-tab.active {
            border-bottom-color: var(--secondary);
            color: var(--secondary);
        }
        
        .transaction-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .transaction-item {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
        }
        
        .transaction-amount.positive {
            color: var(--success);
        }
        
        .transaction-amount.negative {
            color: var(--danger);
        }
        
        /* Bet History */
        .bet-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .bet-tab {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .bet-tab.active {
            border-bottom-color: var(--secondary);
            color: var(--secondary);
        }
        
        /* Inbox */
        .inbox-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .message-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .message-item {
            padding: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .message-sender {
            font-weight: bold;
        }
        
        .message-time {
            font-size: 12px;
            opacity: 0.7;
        }
        
        .message-content {
            font-size: 14px;
        }
        
        .new-message-form {
            margin-top: 20px;
        }
        
        /* Hidden class for toggling screens */
        .hidden {
            display: none;
        }
        
        /* Bet Slip */
        .bet-slip {
            position: fixed;
            bottom: 70px;
            right: 15px;
            background-color: var(--primary);
            border-radius: 10px;
            padding: 15px;
            width: 250px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }
        
        .bet-slip-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .bet-slip-title {
            font-size: 16px;
            font-weight: bold;
        }
        
        .bet-slip-close {
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
        }
        
        .bet-slip-item {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .bet-slip-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .bet-slip-button {
            background-color: var(--secondary);
            color: var(--dark);
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .bet-amount-input {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            color: white;
            margin-top: 5px;
        }
        
        /* Logout Button */
        .logout-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 16px;
        }
        
        /* Back Button */
        .back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 16px;
        }
        
        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Auto Cashout Input */
        .auto-cashout-input {
            width: 80px;
            padding: 5px;
            border-radius: 5px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            color: white;
            text-align: center;
        }
        
        /* Custom Bet Amount Input */
        .custom-bet-input {
            width: 100px;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            color: white;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="auth-screen">
        <div class="auth-logo">
            <i class="fas fa-water"></i> SeePlay
        </div>
        <div class="auth-form">
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" id="loginEmail" class="form-input" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password">
            </div>
            <button id="loginButton" class="auth-button">
                <span id="loginButtonText">Login</span>
                <span id="loginButtonLoading" class="loading hidden"></span>
            </button>
            <div class="auth-link">
                Don't have an account? <a href="#" id="showRegister">Register</a>
            </div>
            <div class="auth-link">
                <a href="#" id="showAdminLogin">Admin Login</a>
            </div>
        </div>
    </div>
    
    <!-- Register Screen -->
    <div id="registerScreen" class="auth-screen hidden">
        <div class="auth-logo">
            <i class="fas fa-water"></i> SeePlay
        </div>
        <div class="auth-form">
            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" id="registerName" class="form-input" placeholder="Enter your full name">
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" id="registerEmail" class="form-input" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" id="registerPassword" class="form-input" placeholder="Create a password">
            </div>
            <div class="form-group">
                <label class="form-label">Confirm Password</label>
                <input type="password" id="registerConfirmPassword" class="form-input" placeholder="Confirm your password">
            </div>
            <div class="form-group">
                <label class="form-label">4-Digit PIN</label>
                <input type="password" id="registerPin" class="form-input" placeholder="Create a 4-digit PIN" maxlength="4">
            </div>
            <div class="form-group">
                <label class="form-label">Age</label>
                <input type="number" id="registerAge" class="form-input" placeholder="Enter your age">
            </div>
            <div class="form-group">
                <label class="form-label">Country</label>
                <select id="registerCountry" class="form-input">
                    <option value="">Select your country</option>
                    <option value="nigeria">Nigeria</option>
                    <option value="ghana">Ghana</option>
                    <option value="south-africa">South Africa</option>
                    <option value="kenya">Kenya</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Referral Code (Optional)</label>
                <input type="text" id="referralCodeInput" class="form-input" placeholder="Enter referral code if any">
            </div>
            <button id="registerButton" class="auth-button">
                <span id="registerButtonText">Create Account</span>
                <span id="registerButtonLoading" class="loading hidden"></span>
            </button>
            <div class="auth-link">
                Already have an account? <a href="#" id="showLogin">Login</a>
            </div>
        </div>
    </div>
    
    <!-- Admin Login Screen -->
    <div id="adminLoginScreen" class="auth-screen hidden">
        <div class="auth-logo">
            <i class="fas fa-crown"></i> Lord Panel
        </div>
        <div class="auth-form">
            <div class="form-group">
                <label class="form-label">Admin Email</label>
                <input type="email" id="adminEmail" class="form-input" placeholder="Enter admin email">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" id="adminPassword" class="form-input" placeholder="Enter admin password">
            </div>
            <button id="adminLoginButton" class="auth-button">
                <span id="adminLoginButtonText">Login as Lord</span>
                <span id="adminLoginButtonLoading" class="loading hidden"></span>
            </button>
            <div class="auth-link">
                <a href="#" id="showUserLogin">Back to User Login</a>
            </div>
        </div>
    </div>
    
    <!-- Main App Screen -->
    <div id="appScreen" class="container hidden">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <i class="fas fa-water"></i> SeePlay
            </div>
            <div class="time-display" id="currentTime">9:25</div>
            <div class="winning-users" id="winningUsers">
                <!-- Winning users will be displayed here -->
            </div>
            <button class="logout-btn" id="logoutButton">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Balance Card -->
            <div class="balance-card">
                <div class="balance-title">Your Balance</div>
                <div class="balance-amount" id="userBalance">0 SEE</div>
                <div class="balance-stats">
                    <div class="stat-item">
                        <div>USD Value</div>
                        <div class="stat-value" id="usdValue">$0.00</div>
                    </div>
                    <div class="stat-item">
                        <div>Games Played</div>
                        <div class="stat-value" id="gamesPlayedCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div>Wins</div>
                        <div class="stat-value" id="winsCount">0</div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Tabs -->
            <div class="nav-tabs">
                <div class="nav-tab active" data-tab="games">Games</div>
                <div class="nav-tab" data-tab="sports">Sports</div>
                <div class="nav-tab" data-tab="transfer">Transfer</div>
                <div class="nav-tab" data-tab="profile">Profile</div>
            </div>
            
            <!-- Games Section -->
            <div id="gamesSection" class="tab-content">
                <div class="section-header">
                    <div class="section-title">Casino Games</div>
                </div>
                
                <div class="games-grid">
                    <div class="game-card" data-game="aviator">
                        <div class="game-icon"><i class="fas fa-plane"></i></div>
                        <div class="game-name">Aviator</div>
                    </div>
                    <div class="game-card" data-game="mines">
                        <div class="game-icon"><i class="fas fa-bomb"></i></div>
                        <div class="game-name">Mines</div>
                    </div>
                    <div class="game-card" data-game="roulette">
                        <div class="game-icon"><i class="fas fa-dharmachakra"></i></div>
                        <div class="game-name">Roulette</div>
                    </div>
                    <div class="game-card" data-game="dice">
                        <div class="game-icon"><i class="fas fa-dice"></i></div>
                        <div class="game-name">Dice</div>
                    </div>
                </div>
            </div>
            
            <!-- Sports Section -->
            <div id="sportsSection" class="tab-content hidden">
                <div class="section-header">
                    <div class="section-title">Sports Betting</div>
                </div>
                
                <div class="sports-container" id="sportsContainer">
                    <!-- Sports matches will be loaded here -->
                </div>
            </div>
            
            <!-- Transfer Section -->
            <div id="transferSection" class="tab-content hidden">
                <div class="section-header">
                    <div class="section-title">Transfer SEE Coins</div>
                </div>
                
                <div class="profile-section">
                    <div class="form-group">
                        <label class="form-label">Recipient Email</label>
                        <input type="email" id="transferEmail" class="form-input" placeholder="Enter recipient's email">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Amount (Min. 1 SEE)</label>
                        <input type="number" id="transferAmount" class="form-input" placeholder="Enter amount" min="1" step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">4-Digit PIN</label>
                        <input type="password" id="transferPin" class="form-input" placeholder="Enter your PIN" maxlength="4">
                    </div>
                    <button id="transferButton" class="auth-button">
                        <span id="transferButtonText">Send SEE</span>
                        <span id="transferButtonLoading" class="loading hidden"></span>
                    </button>
                </div>
                
                <div class="transaction-section">
                    <div class="section-header">
                        <div class="section-title">Transaction History</div>
                    </div>
                    
                    <div class="transaction-tabs">
                        <div class="transaction-tab active" data-transaction-tab="all">All</div>
                        <div class="transaction-tab" data-transaction-tab="transfers">Transfers</div>
                        <div class="transaction-tab" data-transaction-tab="bets">Bets</div>
                        <div class="transaction-tab" data-transaction-tab="wins">Wins</div>
                    </div>
                    
                    <div class="transaction-list" id="transactionList">
                        <!-- Transactions will be loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- Profile Section -->
            <div id="profileSection" class="tab-content hidden">
                <div class="profile-section">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="profile-info">
                            <div class="profile-name" id="profileUserName">User Name</div>
                            <div class="profile-email" id="profileUserEmail">user@example.com</div>
                        </div>
                    </div>
                    
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileGamesPlayed">0</div>
                            <div class="profile-stat-label">Games Played</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileWins">0</div>
                            <div class="profile-stat-label">Wins</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileReferrals">0</div>
                            <div class="profile-stat-label">Referrals</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Your Referral Code</label>
                        <input type="text" class="form-input" id="userReferralCode" readonly>
                    </div>
                    <button class="auth-button" style="margin-top: 10px;" id="copyReferralBtn">Copy Referral Code</button>
                </div>
                
                <div class="referral-section">
                    <div class="section-header">
                        <div class="section-title">Your Referrals</div>
                    </div>
                    <div class="referral-list" id="referralList">
                        <!-- Referrals will be loaded here -->
                    </div>
                    <button class="auth-button" id="claimReferralBtn" disabled>Claim Referral Bonus (0/10)</button>
                </div>
                
                <div class="inbox-section">
                    <div class="section-header">
                        <div class="section-title">Inbox</div>
                    </div>
                    <div class="message-list" id="messageList">
                        <!-- Messages will be loaded here -->
                    </div>
                    <div class="new-message-form">
                        <div class="form-group">
                            <label class="form-label">Message to Admin</label>
                            <textarea class="form-input" id="messageContent" placeholder="Type your message here..." rows="3"></textarea>
                        </div>
                        <button class="auth-button" id="sendMessageBtn">Send Message</button>
                    </div>
                </div>
                
                <div class="profile-section">
                    <div class="section-header">
                        <div class="section-title">Bet History</div>
                    </div>
                    
                    <div class="bet-tabs">
                        <div class="bet-tab active" data-bet-tab="open">Open Bets</div>
                        <div class="bet-tab" data-bet-tab="running">Running</div>
                        <div class="bet-tab" data-bet-tab="won">Won</div>
                        <div class="bet-tab" data-bet-tab="lost">Lost</div>
                    </div>
                    
                    <div class="transaction-list" id="betHistoryList">
                        <!-- Bet history will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" data-nav="home">
                <div class="nav-icon"><i class="fas fa-home"></i></div>
                <div>Home</div>
            </div>
            <div class="nav-item" data-nav="games">
                <div class="nav-icon"><i class="fas fa-gamepad"></i></div>
                <div>Games</div>
            </div>
            <div class="nav-item" data-nav="sports">
                <div class="nav-icon"><i class="fas fa-futbol"></i></div>
                <div>Sports</div>
            </div>
            <div class="nav-item" data-nav="transfer">
                <div class="nav-icon"><i class="fas fa-exchange-alt"></i></div>
                <div>Transfer</div>
            </div>
            <div class="nav-item" data-nav="profile">
                <div class="nav-icon"><i class="fas fa-user"></i></div>
                <div>Profile</div>
            </div>
        </div>
        
        <!-- Bet Slip -->
        <div id="betSlip" class="bet-slip hidden">
            <div class="bet-slip-header">
                <div class="bet-slip-title">Bet Slip</div>
                <button class="bet-slip-close" id="closeBetSlip">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="betSlipContent">
                <!-- Bet items will be added here -->
            </div>
            <div class="form-group" style="margin-top: 10px;">
                <label class="form-label">Bet Amount (SEE)</label>
                <input type="number" class="bet-amount-input" id="betAmountInput" value="1.00" min="1.00" step="0.01">
            </div>
            <div class="bet-slip-actions">
                <button class="bet-slip-button" id="placeBetBtn">Place Bet</button>
                <button class="bet-slip-button" id="clearBetSlipBtn">Clear</button>
            </div>
        </div>
    </div>
    
    <!-- Game Screens -->
    <div id="gameScreens" class="hidden">
        <!-- Aviator Game -->
        <div id="aviatorGame" class="game-screen hidden">
            <button class="back-btn" id="aviatorBackBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="game-header">
                <div class="game-title">Aviator</div>
                <div class="game-balance" id="aviatorBalance">0 SEE</div>
            </div>
            
            <div class="aviator-history" id="aviatorHistory">
                <!-- Previous rounds will be shown here -->
            </div>
            
            <div class="game-area" id="aviatorArea">
                <div class="aviator-multiplier" id="aviatorMultiplier">1.00x</div>
                <div class="aviator-cashout" id="aviatorCashoutAmount">Cashout: 0.00 SEE</div>
                <div class="aviator-plane" id="aviatorPlane">✈️</div>
                <div class="aviator-players" id="aviatorPlayers">
                    Online Players: 0
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Bet Amount (SEE)</label>
                <input type="number" class="custom-bet-input" id="aviatorBetAmountInput" value="1.00" min="1.00" step="0.01">
            </div>
            
            <div class="form-group">
                <label class="form-label">Auto Cashout at (x)</label>
                <input type="number" class="auto-cashout-input" id="autoCashoutInput" value="2.00" min="1.10" step="0.10">
            </div>
            
            <div class="bet-controls">
                <button class="bet-button" id="aviatorBetButton">BET</button>
                <button class="bet-button" id="aviatorCashoutButton" disabled>CASHOUT</button>
            </div>
        </div>
        
        <!-- Mines Game -->
        <div id="minesGame" class="game-screen hidden">
            <button class="back-btn" id="minesBackBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="game-header">
                <div class="game-title">Mines</div>
                <div class="game-balance" id="minesBalance">0 SEE</div>
            </div>
            
            <div class="mines-settings">
                <div class="mines-setting">
                    <div class="mines-setting-label">Mines</div>
                    <div class="mines-setting-value" id="minesCount">3</div>
                    <div class="mines-setting-controls">
                        <button class="mines-control-btn" id="decreaseMines">-</button>
                        <button class="mines-control-btn" id="increaseMines">+</button>
                    </div>
                </div>
                <div class="mines-setting">
                    <div class="mines-setting-label">Bet Amount</div>
                    <input type="number" class="custom-bet-input" id="minesBetAmountInput" value="1.00" min="1.00" step="0.01">
                </div>
            </div>
            
            <div class="game-area">
                <div class="mines-grid" id="minesGrid">
                    <!-- Mines grid will be generated here -->
                </div>
                <div class="aviator-cashout" id="minesCashoutAmount">Potential Cashout: 1.00x</div>
                <div class="mines-multipliers" id="minesMultipliers">
                    Multipliers: 1.20x • 1.25x • 1.50x
                </div>
            </div>
            <div class="bet-controls">
                <button class="bet-button" id="minesPlayButton">PLAY</button>
                <button class="bet-button" id="minesCashoutButton" disabled>CASHOUT</button>
            </div>
        </div>
        
        <!-- Dice Game -->
        <div id="diceGame" class="game-screen hidden">
            <button class="back-btn" id="diceBackBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="game-header">
                <div class="game-title">Dice</div>
                <div class="game-balance" id="diceBalance">0 SEE</div>
            </div>
            
            <div class="game-area">
                <div class="dice-container">
                    <div class="dice" id="diceElement">⚅</div>
                    <div id="diceResult" style="font-size: 18px; font-weight: bold;">Roll the dice!</div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Bet Amount (SEE)</label>
                <input type="number" class="custom-bet-input" id="diceBetAmountInput" value="1.00" min="1.00" step="0.01">
            </div>
            
            <div class="dice-bet-options">
                <div class="dice-bet-option" data-bet="1">1</div>
                <div class="dice-bet-option" data-bet="2">2</div>
                <div class="dice-bet-option" data-bet="3">3</div>
                <div class="dice-bet-option" data-bet="4">4</div>
                <div class="dice-bet-option" data-bet="5">5</div>
                <div class="dice-bet-option" data-bet="6">6</div>
            </div>
            
            <div class="bet-controls">
                <button class="bet-button" id="diceRollButton">ROLL</button>
            </div>
        </div>
        
        <!-- Roulette Game -->
        <div id="rouletteGame" class="game-screen hidden">
            <button class="back-btn" id="rouletteBackBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="game-header">
                <div class="game-title">Roulette</div>
                <div class="game-balance" id="rouletteBalance">0 SEE</div>
            </div>
            
            <div class="game-area">
                <div class="roulette-container">
                    <div class="roulette-wheel" id="rouletteWheel">
                        <div class="roulette-pointer"></div>
                    </div>
                    <div id="rouletteResult" style="font-size: 18px; font-weight: bold;">Spin the wheel!</div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Bet Amount (SEE)</label>
                <input type="number" class="custom-bet-input" id="rouletteBetAmountInput" value="1.00" min="1.00" step="0.01">
            </div>
            
            <div class="roulette-bet-options">
                <div class="roulette-bet-option" data-bet="red">Red</div>
                <div class="roulette-bet-option" data-bet="black">Black</div>
                <div class="roulette-bet-option" data-bet="even">Even</div>
                <div class="roulette-bet-option" data-bet="odd">Odd</div>
            </div>
            
            <div class="bet-controls">
                <button class="bet-button" id="rouletteSpinButton">SPIN</button>
            </div>
        </div>
        
        <!-- Sports Game -->
        <div id="sportsGame" class="game-screen hidden">
            <button class="back-btn" id="sportsBackBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="game-header">
                <div class="game-title" id="sportsGameTitle">Sports Match</div>
                <div class="game-balance" id="sportsBalance">0 SEE</div>
            </div>
            
            <div class="game-area">
                <div class="sports-game-area">
                    <div class="match-teams">
                        <div class="team">
                            <div class="team-flag" id="homeTeamFlag">H</div>
                            <div class="team-name" id="homeTeamName">Home</div>
                        </div>
                        <div class="vs">VS</div>
                        <div class="team">
                            <div class="team-flag" id="awayTeamFlag">A</div>
                            <div class="team-name" id="awayTeamName">Away</div>
                        </div>
                    </div>
                    <div class="score-display" id="sportsScore">0 : 0</div>
                    <div class="match-time" id="sportsTime">1st Half - 00:00</div>
                    <div class="match-events" id="sportsEvents"></div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Bet Amount (SEE)</label>
                <input type="number" class="custom-bet-input" id="sportsBetAmountInput" value="1.00" min="1.00" step="0.01">
            </div>
            
            <div class="bet-controls">
                <button class="bet-button" id="sportsPlayButton">START MATCH</button>
            </div>
        </div>
    </div>
    
    <!-- Admin Panel -->
    <div id="adminPanel" class="container hidden">
        <div class="header">
            <div class="logo">
                <i class="fas fa-crown"></i> Lord Panel
            </div>
            <button class="logout-btn" id="adminLogoutButton">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
        
        <div class="admin-panel">
            <div class="admin-header">
                <div class="admin-title">Admin Dashboard</div>
            </div>
            
            <div class="admin-stats">
                <div class="admin-stat">
                    <div class="admin-stat-value" id="totalUsers">0</div>
                    <div class="admin-stat-label">Total Users</div>
                </div>
                <div class="admin-stat">
                    <div class="admin-stat-value" id="totalBalance">0 SEE</div>
                    <div class="admin-stat-label">User Balances</div>
                </div>
                <div class="admin-stat">
                    <div class="admin-stat-value" id="vaultBalance">50,000,000,000 SEE</div>
                    <div class="admin-stat-label">Vault Balance</div>
                </div>
                <div class="admin-stat">
                    <div class="admin-stat-value" id="activeGames">0</div>
                    <div class="admin-stat-label">Active Games</div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Set SEE Coin Price (USD)</label>
                <input type="number" class="form-input" id="coinPriceInput" value="1.01" step="0.01" min="0.01">
                <button class="auth-button" style="margin-top: 10px;" id="setCoinPriceBtn">Set Price</button>
            </div>
            
            <div class="admin-actions">
                <button class="admin-action" id="addCoinsBtn">Add Coins to User</button>
                <button class="admin-action" id="banUserBtn">Ban User</button>
                <button class="admin-action" id="messageUserBtn">Message User</button>
                <button class="admin-action" id="viewReportsBtn">View Reports</button>
            </div>
            
            <div class="section-header">
                <div class="section-title">All Users</div>
            </div>
            
            <div class="users-list" id="usersList">
                <!-- Users will be listed here -->
            </div>
        </div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDDruUr6ONHIqZqNmvbnSfMF3nTlbejcvU",
            authDomain: "seaplay-6a197.firebaseapp.com",
            projectId: "seaplay-6a197",
            storageBucket: "seaplay-6a197.firebasestorage.app",
            messagingSenderId: "419084403907",
            appId: "1:419084403907:web:2ef95d7c804c92f4808e76",
            measurementId: "G-LDY3ZLKJFF"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // DOM Elements
        const loginScreen = document.getElementById('loginScreen');
        const registerScreen = document.getElementById('registerScreen');
        const adminLoginScreen = document.getElementById('adminLoginScreen');
        const appScreen = document.getElementById('appScreen');
        const adminPanel = document.getElementById('adminPanel');
        const gameScreens = document.getElementById('gameScreens');
        
        // Auth buttons with loading states
        const loginButton = document.getElementById('loginButton');
        const loginButtonText = document.getElementById('loginButtonText');
        const loginButtonLoading = document.getElementById('loginButtonLoading');
        
        const registerButton = document.getElementById('registerButton');
        const registerButtonText = document.getElementById('registerButtonText');
        const registerButtonLoading = document.getElementById('registerButtonLoading');
        
        const adminLoginButton = document.getElementById('adminLoginButton');
        const adminLoginButtonText = document.getElementById('adminLoginButtonText');
        const adminLoginButtonLoading = document.getElementById('adminLoginButtonLoading');
        
        const transferButton = document.getElementById('transferButton');
        const transferButtonText = document.getElementById('transferButtonText');
        const transferButtonLoading = document.getElementById('transferButtonLoading');
        
        const logoutButton = document.getElementById('logoutButton');
        const adminLogoutButton = document.getElementById('adminLogoutButton');
        
        const showRegister = document.getElementById('showRegister');
        const showLogin = document.getElementById('showLogin');
        const showAdminLogin = document.getElementById('showAdminLogin');
        const showUserLogin = document.getElementById('showUserLogin');
        
        // Game elements
        const aviatorBetButton = document.getElementById('aviatorBetButton');
        const aviatorCashoutButton = document.getElementById('aviatorCashoutButton');
        const aviatorMultiplier = document.getElementById('aviatorMultiplier');
        const aviatorCashoutAmount = document.getElementById('aviatorCashoutAmount');
        const aviatorPlane = document.getElementById('aviatorPlane');
        const aviatorBackBtn = document.getElementById('aviatorBackBtn');
        const aviatorPlayers = document.getElementById('aviatorPlayers');
        const aviatorHistory = document.getElementById('aviatorHistory');
        const aviatorBetAmountInput = document.getElementById('aviatorBetAmountInput');
        const autoCashoutInput = document.getElementById('autoCashoutInput');
        
        const minesPlayButton = document.getElementById('minesPlayButton');
        const minesCashoutButton = document.getElementById('minesCashoutButton');
        const minesCashoutAmount = document.getElementById('minesCashoutAmount');
        const minesGrid = document.getElementById('minesGrid');
        const minesBackBtn = document.getElementById('minesBackBtn');
        const minesCount = document.getElementById('minesCount');
        const minesBetAmountInput = document.getElementById('minesBetAmountInput');
        const minesMultipliers = document.getElementById('minesMultipliers');
        const decreaseMines = document.getElementById('decreaseMines');
        const increaseMines = document.getElementById('increaseMines');
        
        // Dice elements
        const diceRollButton = document.getElementById('diceRollButton');
        const diceElement = document.getElementById('diceElement');
        const diceResult = document.getElementById('diceResult');
        const diceBackBtn = document.getElementById('diceBackBtn');
        const diceBetAmountInput = document.getElementById('diceBetAmountInput');
        
        // Roulette elements
        const rouletteSpinButton = document.getElementById('rouletteSpinButton');
        const rouletteWheel = document.getElementById('rouletteWheel');
        const rouletteResult = document.getElementById('rouletteResult');
        const rouletteBackBtn = document.getElementById('rouletteBackBtn');
        const rouletteBetAmountInput = document.getElementById('rouletteBetAmountInput');
        
        // Sports elements
        const sportsContainer = document.getElementById('sportsContainer');
        const sportsPlayButton = document.getElementById('sportsPlayButton');
        const sportsBackBtn = document.getElementById('sportsBackBtn');
        const sportsGameTitle = document.getElementById('sportsGameTitle');
        const sportsBalance = document.getElementById('sportsBalance');
        const homeTeamName = document.getElementById('homeTeamName');
        const awayTeamName = document.getElementById('awayTeamName');
        const homeTeamFlag = document.getElementById('homeTeamFlag');
        const awayTeamFlag = document.getElementById('awayTeamFlag');
        const sportsScore = document.getElementById('sportsScore');
        const sportsTime = document.getElementById('sportsTime');
        const sportsEvents = document.getElementById('sportsEvents');
        const sportsBetAmountInput = document.getElementById('sportsBetAmountInput');
        
        // Bet slip elements
        const betSlip = document.getElementById('betSlip');
        const betSlipContent = document.getElementById('betSlipContent');
        const closeBetSlip = document.getElementById('closeBetSlip');
        const placeBetBtn = document.getElementById('placeBetBtn');
        const clearBetSlipBtn = document.getElementById('clearBetSlipBtn');
        const betAmountInput = document.getElementById('betAmountInput');
        
        // Admin elements
        const addCoinsBtn = document.getElementById('addCoinsBtn');
        const banUserBtn = document.getElementById('banUserBtn');
        const messageUserBtn = document.getElementById('messageUserBtn');
        const viewReportsBtn = document.getElementById('viewReportsBtn');
        const usersList = document.getElementById('usersList');
        const coinPriceInput = document.getElementById('coinPriceInput');
        const setCoinPriceBtn = document.getElementById('setCoinPriceBtn');
        
        // Profile elements
        const profileUserName = document.getElementById('profileUserName');
        const profileUserEmail = document.getElementById('profileUserEmail');
        const profileGamesPlayed = document.getElementById('profileGamesPlayed');
        const profileWins = document.getElementById('profileWins');
        const profileReferrals = document.getElementById('profileReferrals');
        const userReferralCode = document.getElementById('userReferralCode');
        const copyReferralBtn = document.getElementById('copyReferralBtn');
        const referralList = document.getElementById('referralList');
        const claimReferralBtn = document.getElementById('claimReferralBtn');
        const messageList = document.getElementById('messageList');
        const messageContent = document.getElementById('messageContent');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        
        // Transfer elements
        const transferEmail = document.getElementById('transferEmail');
        const transferAmount = document.getElementById('transferAmount');
        const transferPin = document.getElementById('transferPin');
        const transactionList = document.getElementById('transactionList');
        const betHistoryList = document.getElementById('betHistoryList');
        
        // Stats elements
        const usdValue = document.getElementById('usdValue');
        const gamesPlayedCount = document.getElementById('gamesPlayedCount');
        const winsCount = document.getElementById('winsCount');
        
        // App state
        let currentUser = null;
        let isAdmin = false;
        let userBalance = 0;
        let currentGame = null;
        let betSlipItems = [];
        let gameIntervals = {};
        let adminVaultBalance = 50000000000; // 50B SEE
        let coinPrice = 1.01; // Default coin price
        
        // Mines game state
        let minesGameState = {
            betAmount: 1.00,
            minesCount: 3,
            grid: [],
            revealed: [],
            gameActive: false,
            cashoutMultiplier: 1.0,
            multipliers: [1.20, 1.25, 1.50]
        };
        
        // Dice game state
        let diceGameState = {
            selectedBet: null,
            betAmount: 1.00
        };
        
        // Roulette game state
        let rouletteGameState = {
            selectedBet: null,
            betAmount: 1.00
        };
        
        // Sports game state
        let sportsGameState = {
            selectedMatch: null,
            betAmount: 1.00,
            homeScore: 0,
            awayScore: 0,
            matchTime: 0,
            isFirstHalf: true,
            events: []
        };
        
        // Sports matches data
        const sportsMatches = [
            { id: 1, home: "Arsenal", away: "Chelsea", homeOdds: 2.10, drawOdds: 3.20, awayOdds: 3.50 },
            { id: 2, home: "Man City", away: "Liverpool", homeOdds: 2.30, drawOdds: 3.40, awayOdds: 2.90 },
            { id: 3, home: "Barcelona", away: "Real Madrid", homeOdds: 2.50, drawOdds: 3.30, awayOdds: 2.70 },
            { id: 4, home: "Bayern", away: "Dortmund", homeOdds: 1.80, drawOdds: 3.60, awayOdds: 4.20 },
            { id: 5, home: "PSG", away: "Marseille", homeOdds: 1.70, drawOdds: 3.80, awayOdds: 4.50 },
            { id: 6, home: "Juventus", away: "AC Milan", homeOdds: 2.20, drawOdds: 3.10, awayOdds: 3.30 },
            { id: 7, home: "Inter", away: "Napoli", homeOdds: 2.40, drawOdds: 3.20, awayOdds: 2.90 },
            { id: 8, home: "Atletico", away: "Sevilla", homeOdds: 2.00, drawOdds: 3.10, awayOdds: 3.80 },
            { id: 9, home: "Man United", away: "Tottenham", homeOdds: 2.60, drawOdds: 3.30, awayOdds: 2.70 },
            { id: 10, home: "Leicester", away: "West Ham", homeOdds: 2.70, drawOdds: 3.20, awayOdds: 2.60 }
        ];

        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            document.getElementById('currentTime').textContent = timeString;
        }
        
        setInterval(updateTime, 1000);
        updateTime();
        
        // Show/Hide Screens
        function showScreen(screen) {
            loginScreen.classList.add('hidden');
            registerScreen.classList.add('hidden');
            adminLoginScreen.classList.add('hidden');
            appScreen.classList.add('hidden');
            adminPanel.classList.add('hidden');
            gameScreens.classList.add('hidden');
            
            screen.classList.remove('hidden');
        }
        
        // Set loading state for buttons
        function setButtonLoading(button, textElement, loadingElement, isLoading) {
            if (isLoading) {
                textElement.classList.add('hidden');
                loadingElement.classList.remove('hidden');
                button.disabled = true;
            } else {
                textElement.classList.remove('hidden');
                loadingElement.classList.add('hidden');
                button.disabled = false;
            }
        }
        
        // Navigation Functions
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
            
            // Show selected tab content
            document.getElementById(`${tabName}Section`).classList.remove('hidden');
            
            // Update active tab
            document.querySelectorAll('.nav-tab').forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Load data for specific tabs
            if (tabName === 'sports') {
                loadSportsMatches();
            } else if (tabName === 'transfer') {
                loadTransactionHistory();
            } else if (tabName === 'profile') {
                updateProfile();
                loadMessages();
                loadBetHistory();
            }
        }
        
        function switchBottomNav(navItem) {
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.dataset.nav === navItem) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Handle navigation based on nav item
            switch(navItem) {
                case 'home':
                case 'games':
                    switchTab('games');
                    break;
                case 'sports':
                    switchTab('sports');
                    break;
                case 'transfer':
                    switchTab('transfer');
                    break;
                case 'profile':
                    switchTab('profile');
                    break;
            }
        }
        
        // Update profile information
        function updateProfile() {
            if (!currentUser) return;
            
            profileUserName.textContent = currentUser.name || 'User Name';
            profileUserEmail.textContent = currentUser.email || 'user@example.com';
            userReferralCode.value = currentUser.referralCode || 'SEE12345';
            
            // Update stats
            profileGamesPlayed.textContent = currentUser.gamesPlayed || 0;
            profileWins.textContent = currentUser.wins || 0;
            profileReferrals.textContent = currentUser.referrals ? currentUser.referrals.length : 0;
            
            // Update referral button
            const referralCount = currentUser.referrals ? currentUser.referrals.length : 0;
            claimReferralBtn.textContent = `Claim Referral Bonus (${referralCount}/10)`;
            claimReferralBtn.disabled = referralCount < 10;
            
            // Update referral list
            updateReferralList();
        }
        
        // Update referral list
        function updateReferralList() {
            const referrals = currentUser.referrals || [];
            referralList.innerHTML = '';
            
            if (referrals.length === 0) {
                referralList.innerHTML = `
                    <div style="text-align: center; padding: 20px; opacity: 0.7;">
                        <i class="fas fa-user-friends" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <div>No referrals yet</div>
                        <div style="font-size: 12px; margin-top: 5px;">Share your code to earn 1 SEE for every 10 referrals</div>
                    </div>
                `;
            } else {
                referrals.forEach(ref => {
                    const refItem = document.createElement('div');
                    refItem.className = 'referral-item';
                    refItem.innerHTML = `
                        <div>${ref.email}</div>
                        <div>${new Date(ref.date).toLocaleDateString()}</div>
                    `;
                    referralList.appendChild(refItem);
                });
            }
        }
        
        // Load transaction history
        function loadTransactionHistory() {
            if (!currentUser) return;
            
            // In a real app, this would fetch from Firestore
            // For demo, we'll create sample data
            const transactions = currentUser.transactions || [];
            const transactionList = document.getElementById('transactionList');
            transactionList.innerHTML = '';
            
            if (transactions.length === 0) {
                transactionList.innerHTML = `
                    <div style="text-align: center; padding: 20px; opacity: 0.7;">
                        <i class="fas fa-history" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <div>No transactions yet</div>
                    </div>
                `;
            } else {
                transactions.forEach(transaction => {
                    const transactionItem = document.createElement('div');
                    transactionItem.className = 'transaction-item';
                    const amountClass = transaction.amount > 0 ? 'positive' : 'negative';
                    const amountSign = transaction.amount > 0 ? '+' : '';
                    
                    transactionItem.innerHTML = `
                        <div>
                            <div style="font-weight: bold;">${transaction.type}</div>
                            <div style="font-size: 12px; opacity: 0.8;">${new Date(transaction.date).toLocaleString()}</div>
                            <div style="font-size: 12px;">${transaction.description}</div>
                        </div>
                        <div class="transaction-amount ${amountClass}">${amountSign}${transaction.amount} SEE</div>
                    `;
                    transactionList.appendChild(transactionItem);
                });
            }
        }
        
        // Load bet history
        function loadBetHistory() {
            if (!currentUser) return;
            
            const bets = currentUser.bets || [];
            const betHistoryList = document.getElementById('betHistoryList');
            betHistoryList.innerHTML = '';
            
            if (bets.length === 0) {
                betHistoryList.innerHTML = `
                    <div style="text-align: center; padding: 20px; opacity: 0.7;">
                        <i class="fas fa-ticket-alt" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <div>No bets yet</div>
                    </div>
                `;
            } else {
                bets.forEach(bet => {
                    const betItem = document.createElement('div');
                    betItem.className = 'transaction-item';
                    const statusClass = bet.status === 'won' ? 'positive' : bet.status === 'lost' ? 'negative' : '';
                    
                    betItem.innerHTML = `
                        <div>
                            <div style="font-weight: bold;">${bet.match}</div>
                            <div style="font-size: 12px; opacity: 0.8;">${bet.type} @ ${bet.odds}</div>
                            <div style="font-size: 12px;">${new Date(bet.date).toLocaleString()}</div>
                        </div>
                        <div>
                            <div style="font-weight: bold; text-align: right;">${bet.amount} SEE</div>
                            <div style="font-size: 12px; text-align: right; color: ${bet.status === 'won' ? 'var(--success)' : bet.status === 'lost' ? 'var(--danger)' : 'var(--warning)'}">
                                ${bet.status.toUpperCase()}
                            </div>
                        </div>
                    `;
                    betHistoryList.appendChild(betItem);
                });
            }
        }
        
        // Load messages
        function loadMessages() {
            if (!currentUser) return;
            
            const messages = currentUser.messages || [];
            const messageList = document.getElementById('messageList');
            messageList.innerHTML = '';
            
            if (messages.length === 0) {
                messageList.innerHTML = `
                    <div style="text-align: center; padding: 20px; opacity: 0.7;">
                        <i class="fas fa-envelope" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <div>No messages yet</div>
                    </div>
                `;
            } else {
                messages.forEach(message => {
                    const messageItem = document.createElement('div');
                    messageItem.className = 'message-item';
                    messageItem.innerHTML = `
                        <div class="message-header">
                            <div class="message-sender">${message.from}</div>
                            <div class="message-time">${new Date(message.timestamp).toLocaleString()}</div>
                        </div>
                        <div class="message-content">${message.content}</div>
                    `;
                    messageList.appendChild(messageItem);
                });
            }
        }
        
        // Load sports matches
        function loadSportsMatches() {
            sportsContainer.innerHTML = '';
            
            // Shuffle matches for variety
            const shuffledMatches = [...sportsMatches].sort(() => Math.random() - 0.5);
            
            shuffledMatches.forEach(match => {
                const matchElement = document.createElement('div');
                matchElement.className = 'sport-match';
                matchElement.innerHTML = `
                    <div class="match-header">
                        <div>Premier League</div>
                        <div>Today - 20:00</div>
                    </div>
                    <div class="match-teams">
                        <div class="team">
                            <div class="team-flag">${match.home.substring(0, 2)}</div>
                            <div class="team-name">${match.home}</div>
                        </div>
                        <div class="vs">VS</div>
                        <div class="team">
                            <div class="team-flag">${match.away.substring(0, 2)}</div>
                            <div class="team-name">${match.away}</div>
                        </div>
                    </div>
                    <div class="match-odds">
                        <div class="odd" data-match="${match.id}" data-bet="home" data-odd="${match.homeOdds}">${match.homeOdds}</div>
                        <div class="odd" data-match="${match.id}" data-bet="draw" data-odd="${match.drawOdds}">${match.drawOdds}</div>
                        <div class="odd" data-match="${match.id}" data-bet="away" data-odd="${match.awayOdds}">${match.awayOdds}</div>
                    </div>
                `;
                sportsContainer.appendChild(matchElement);
            });
        }
        
        // Generate unique referral code
        function generateReferralCode() {
            return 'SEE' + Math.random().toString(36).substring(2, 8).toUpperCase();
        }
        
        // Update user balance display
        function updateBalance() {
            document.getElementById('userBalance').textContent = `${userBalance.toFixed(2)} SEE`;
            
            // Update USD value
            const usdAmount = (userBalance * coinPrice).toFixed(2);
            usdValue.textContent = `$${usdAmount}`;
            
            // Update all game balances
            document.querySelectorAll('.game-balance').forEach(el => {
                el.textContent = `${userBalance.toFixed(2)} SEE`;
            });
            
            // Update stats
            gamesPlayedCount.textContent = currentUser?.gamesPlayed || 0;
            winsCount.textContent = currentUser?.wins || 0;
            
            // Update vault balance in admin panel
            document.getElementById('vaultBalance').textContent = `${adminVaultBalance.toLocaleString()} SEE`;
        }
        
        // Record transaction
        function recordTransaction(type, amount, description) {
            if (!currentUser) return;
            
            const transaction = {
                type,
                amount,
                description,
                date: new Date().toISOString(),
                id: Date.now().toString()
            };
            
            // Add to user's transactions
            if (!currentUser.transactions) {
                currentUser.transactions = [];
            }
            currentUser.transactions.unshift(transaction);
            
            // Update Firestore
            if (currentUser.uid) {
                db.collection('users').doc(currentUser.uid).update({
                    transactions: firebase.firestore.FieldValue.arrayUnion(transaction),
                    balance: firebase.firestore.FieldValue.increment(amount)
                }).then(() => {
                    userBalance += amount;
                    updateBalance();
                    loadTransactionHistory();
                }).catch(error => {
                    console.error('Error recording transaction:', error);
                });
            }
        }
        
        // Record bet
        function recordBet(match, type, odds, amount, status) {
            if (!currentUser) return;
            
            const bet = {
                match,
                type,
                odds,
                amount,
                status,
                date: new Date().toISOString(),
                id: Date.now().toString()
            };
            
            // Add to user's bets
            if (!currentUser.bets) {
                currentUser.bets = [];
            }
            currentUser.bets.unshift(bet);
            
            // Update Firestore
            if (currentUser.uid) {
                db.collection('users').doc(currentUser.uid).update({
                    bets: firebase.firestore.FieldValue.arrayUnion(bet)
                }).then(() => {
                    loadBetHistory();
                }).catch(error => {
                    console.error('Error recording bet:', error);
                });
            }
        }
        
        // Update winning users display
        function updateWinningUsers(name, amount) {
            const winningUsers = document.getElementById('winningUsers');
            const userElement = document.createElement('div');
            userElement.className = 'winning-user';
            userElement.innerHTML = `
                <i class="fas fa-trophy"></i>
                <span>${name} won ${amount.toFixed(2)} SEE</span>
            `;
            
            winningUsers.appendChild(userElement);
            
            // Remove after 5 seconds
            setTimeout(() => {
                userElement.remove();
            }, 5000);
        }
        
        // Game Functions
        function startGame(gameName) {
            currentGame = gameName;
            appScreen.classList.add('hidden');
            document.getElementById(`${gameName}Game`).classList.remove('hidden');
            gameScreens.classList.remove('hidden');
            
            // Update game balance
            document.querySelectorAll('.game-balance').forEach(el => {
                el.textContent = `${userBalance.toFixed(2)} SEE`;
            });
            
            // Initialize specific game
            if (gameName === 'mines') {
                initializeMinesGame();
            } else if (gameName === 'aviator') {
                resetAviatorGame();
            } else if (gameName === 'dice') {
                initializeDiceGame();
            } else if (gameName === 'roulette') {
                initializeRouletteGame();
            } else if (gameName === 'sports') {
                initializeSportsGame();
            }
        }
        
        function exitGame() {
            gameScreens.classList.add('hidden');
            appScreen.classList.remove('hidden');
            currentGame = null;
            
            // Clear any game intervals
            Object.values(gameIntervals).forEach(interval => clearInterval(interval));
            gameIntervals = {};
        }
        
        // Aviator Game Logic
        function resetAviatorGame() {
            aviatorMultiplier.textContent = '1.00x';
            aviatorCashoutAmount.textContent = 'Cashout: 0.00 SEE';
            aviatorPlane.style.left = '0px';
            aviatorBetButton.disabled = false;
            aviatorCashoutButton.disabled = true;
            
            // Update online players
            const onlinePlayers = Math.floor(Math.random() * 5) + 1;
            aviatorPlayers.textContent = `Online Players: ${onlinePlayers}`;
            
            // Update history
            updateAviatorHistory();
        }
        
        function updateAviatorHistory() {
            // Add some random history items
            const historyItems = [];
            for (let i = 0; i < 5; i++) {
                const multiplier = (Math.random() * 5 + 1).toFixed(2);
                historyItems.push(`<div class="history-item">${multiplier}x</div>`);
            }
            aviatorHistory.innerHTML = historyItems.join('');
        }
        
        function startAviatorGame() {
            const betAmount = parseFloat(aviatorBetAmountInput.value);
            
            if (userBalance < betAmount) {
                alert('Insufficient balance!');
                return;
            }
            
            if (betAmount < 1.00) {
                alert('Minimum bet is 1.00 SEE');
                return;
            }
            
            // Deduct from user and add to vault
            userBalance -= betAmount;
            adminVaultBalance += betAmount;
            updateBalance();
            
            aviatorBetButton.disabled = true;
            aviatorCashoutButton.disabled = false;
            
            let multiplier = 1.00;
            let crashed = false;
            const planeElement = aviatorPlane;
            const gameArea = document.getElementById('aviatorArea');
            const maxWidth = gameArea.offsetWidth - 50;
            const autoCashout = parseFloat(autoCashoutInput.value);
            
            planeElement.style.left = '0px';
            
            gameIntervals.aviator = setInterval(() => {
                if (crashed) return;
                
                multiplier += 0.01;
                aviatorMultiplier.textContent = `${multiplier.toFixed(2)}x`;
                
                // Update plane position
                const currentLeft = parseInt(planeElement.style.left) || 0;
                const newLeft = Math.min(currentLeft + 2, maxWidth);
                planeElement.style.left = `${newLeft}px`;
                
                // Update cashout amount
                const cashoutAmount = (betAmount * multiplier).toFixed(2);
                aviatorCashoutAmount.textContent = `Cashout: ${cashoutAmount} SEE`;
                
                // Auto cashout if set
                if (autoCashout && multiplier >= autoCashout) {
                    cashoutAviator();
                    return;
                }
                
                // Random crash between 1.10x and 5.00x
                if (multiplier > 1.10 && Math.random() < 0.015) {
                    crashed = true;
                    aviatorCashoutButton.disabled = true;
                    aviatorBetButton.disabled = false;
                    aviatorMultiplier.textContent = 'CRASHED!';
                    aviatorCashoutAmount.textContent = `You lost ${betAmount} SEE`;
                    clearInterval(gameIntervals.aviator);
                    
                    // Record transaction
                    recordTransaction('casino', -betAmount, 'Aviator game loss');
                    
                    // Update games played
                    if (currentUser) {
                        currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                    }
                }
            }, 100);
        }
        
        function cashoutAviator() {
            const multiplier = parseFloat(aviatorMultiplier.textContent);
            const betAmount = parseFloat(aviatorBetAmountInput.value);
            const winAmount = betAmount * multiplier;
            
            // Check if vault has enough funds
            if (adminVaultBalance < winAmount) {
                alert('Insufficient funds in vault!');
                return;
            }
            
            // Transfer from vault to user
            userBalance += winAmount;
            adminVaultBalance -= winAmount;
            updateBalance();
            
            aviatorCashoutButton.disabled = true;
            aviatorBetButton.disabled = false;
            
            clearInterval(gameIntervals.aviator);
            
            // Record transaction
            const profit = winAmount - betAmount;
            recordTransaction('casino', profit, `Aviator win at ${multiplier.toFixed(2)}x`);
            
            // Update winning users display
            updateWinningUsers(currentUser.name, profit);
            
            // Update games played and wins
            if (currentUser) {
                currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                currentUser.wins = (currentUser.wins || 0) + 1;
            }
            
            setTimeout(() => {
                resetAviatorGame();
            }, 2000);
        }
        
        // Mines Game Logic
        function initializeMinesGame() {
            minesBetAmountInput.value = minesGameState.betAmount.toFixed(2);
            minesCount.textContent = minesGameState.minesCount;
            updateMinesMultipliers();
            generateMinesGrid();
            updateMinesCashout();
        }
        
        function updateMinesMultipliers() {
            minesMultipliers.textContent = `Multipliers: ${minesGameState.multipliers.map(m => m + 'x').join(' • ')}`;
        }
        
        function generateMinesGrid() {
            minesGrid.innerHTML = '';
            minesGameState.grid = [];
            minesGameState.revealed = [];
            minesGameState.gameActive = false;
            minesGameState.cashoutMultiplier = 1.0;
            
            // Create 5x5 grid
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'mine-cell';
                cell.dataset.index = i;
                cell.innerHTML = '💎';
                cell.addEventListener('click', () => revealMineCell(i));
                
                minesGrid.appendChild(cell);
                minesGameState.grid.push('gem'); // Start with all gems
            }
            
            // Place mines randomly
            let minesPlaced = 0;
            while (minesPlaced < minesGameState.minesCount) {
                const randomIndex = Math.floor(Math.random() * 25);
                if (minesGameState.grid[randomIndex] === 'gem') {
                    minesGameState.grid[randomIndex] = 'mine';
                    minesPlaced++;
                }
            }
            
            minesPlayButton.disabled = false;
            minesCashoutButton.disabled = true;
        }
        
        function revealMineCell(index) {
            if (!minesGameState.gameActive || minesGameState.revealed.includes(index)) {
                return;
            }
            
            minesGameState.revealed.push(index);
            const cell = minesGrid.children[index];
            cell.classList.add('revealed');
            
            if (minesGameState.grid[index] === 'mine') {
                // Hit a mine - game over
                cell.innerHTML = '💣';
                cell.classList.add('mine');
                minesGameState.gameActive = false;
                minesCashoutButton.disabled = true;
                
                // Reveal all mines
                for (let i = 0; i < 25; i++) {
                    if (minesGameState.grid[i] === 'mine') {
                        const mineCell = minesGrid.children[i];
                        mineCell.innerHTML = '💣';
                        mineCell.classList.add('mine');
                        mineCell.classList.add('revealed');
                    }
                }
                
                // Record transaction
                recordTransaction('casino', -minesGameState.betAmount, 'Mines game loss');
                
                // Update games played
                if (currentUser) {
                    currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                }
                
                setTimeout(() => {
                    alert('Game Over! You hit a mine.');
                    initializeMinesGame();
                }, 1000);
            } else {
                // Found a gem
                cell.innerHTML = '💎';
                cell.classList.add('gem');
                
                // Increase cashout multiplier based on multipliers array
                const multiplierIndex = Math.min(minesGameState.revealed.length - 1, minesGameState.multipliers.length - 1);
                minesGameState.cashoutMultiplier = minesGameState.multipliers[multiplierIndex];
                updateMinesCashout();
                
                // Check if all gems are found
                const totalGems = 25 - minesGameState.minesCount;
                if (minesGameState.revealed.length === totalGems) {
                    // All gems found - auto cashout
                    cashoutMines();
                }
            }
        }
        
        function updateMinesCashout() {
            const cashoutAmount = (minesGameState.betAmount * minesGameState.cashoutMultiplier).toFixed(2);
            minesCashoutAmount.textContent = `Potential Cashout: ${cashoutAmount} SEE (${minesGameState.cashoutMultiplier}x)`;
        }
        
        function startMinesGame() {
            const betAmount = parseFloat(minesBetAmountInput.value);
            
            if (userBalance < betAmount) {
                alert('Insufficient balance!');
                return;
            }
            
            if (betAmount < 1.00) {
                alert('Minimum bet is 1.00 SEE');
                return;
            }
            
            minesGameState.betAmount = betAmount;
            
            // Deduct from user and add to vault
            userBalance -= betAmount;
            adminVaultBalance += betAmount;
            updateBalance();
            
            minesGameState.gameActive = true;
            minesPlayButton.disabled = true;
            minesCashoutButton.disabled = false;
            minesGameState.cashoutMultiplier = 1.0;
            updateMinesCashout();
        }
        
        function cashoutMines() {
            const winAmount = minesGameState.betAmount * minesGameState.cashoutMultiplier;
            
            // Check if vault has enough funds
            if (adminVaultBalance < winAmount) {
                alert('Insufficient funds in vault!');
                return;
            }
            
            // Transfer from vault to user
            userBalance += winAmount;
            adminVaultBalance -= winAmount;
            updateBalance();
            
            minesCashoutButton.disabled = true;
            minesPlayButton.disabled = false;
            minesGameState.gameActive = false;
            
            // Record transaction
            const profit = winAmount - minesGameState.betAmount;
            recordTransaction('casino', profit, `Mines win with ${minesGameState.cashoutMultiplier.toFixed(2)}x multiplier`);
            
            // Update winning users display
            updateWinningUsers(currentUser.name, profit);
            
            // Update games played and wins
            if (currentUser) {
                currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                currentUser.wins = (currentUser.wins || 0) + 1;
            }
            
            // Reveal all cells
            for (let i = 0; i < 25; i++) {
                const cell = minesGrid.children[i];
                cell.classList.add('revealed');
                if (minesGameState.grid[i] === 'mine') {
                    cell.innerHTML = '💣';
                    cell.classList.add('mine');
                }
            }
            
            setTimeout(() => {
                alert(`You cashed out ${winAmount.toFixed(2)} SEE!`);
                initializeMinesGame();
            }, 2000);
        }
        
        // Dice Game Logic
        function initializeDiceGame() {
            // Set up dice bet options
            document.querySelectorAll('.dice-bet-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.dice-bet-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    diceGameState.selectedBet = parseInt(this.dataset.bet);
                });
            });
        }
        
        function rollDice() {
            if (!diceGameState.selectedBet) {
                alert('Please select a number to bet on!');
                return;
            }
            
            const betAmount = parseFloat(diceBetAmountInput.value);
            
            if (userBalance < betAmount) {
                alert('Insufficient balance!');
                return;
            }
            
            if (betAmount < 1.00) {
                alert('Minimum bet is 1.00 SEE');
                return;
            }
            
            diceGameState.betAmount = betAmount;
            
            // Deduct from user and add to vault
            userBalance -= betAmount;
            adminVaultBalance += betAmount;
            updateBalance();
            
            diceRollButton.disabled = true;
            
            // Animate dice roll
            let rolls = 0;
            const maxRolls = 10;
            const rollInterval = setInterval(() => {
                const randomNum = Math.floor(Math.random() * 6) + 1;
                diceElement.textContent = getDiceFace(randomNum);
                rolls++;
                
                if (rolls >= maxRolls) {
                    clearInterval(rollInterval);
                    
                    const finalNumber = Math.floor(Math.random() * 6) + 1;
                    diceElement.textContent = getDiceFace(finalNumber);
                    
                    // Check win
                    if (finalNumber === diceGameState.selectedBet) {
                        const winAmount = diceGameState.betAmount * 6; // 6x payout
                        
                        // Check if vault has enough funds
                        if (adminVaultBalance < winAmount) {
                            alert('Insufficient funds in vault!');
                            diceRollButton.disabled = false;
                            return;
                        }
                        
                        // Transfer from vault to user
                        userBalance += winAmount;
                        adminVaultBalance -= winAmount;
                        updateBalance();
                        
                        diceResult.textContent = `You won ${(winAmount - diceGameState.betAmount).toFixed(2)} SEE!`;
                        recordTransaction('casino', winAmount - diceGameState.betAmount, 'Dice game win');
                        updateWinningUsers(currentUser.name, winAmount - diceGameState.betAmount);
                        
                        // Update games played and wins
                        if (currentUser) {
                            currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                            currentUser.wins = (currentUser.wins || 0) + 1;
                        }
                    } else {
                        diceResult.textContent = 'You lost! Try again.';
                        recordTransaction('casino', -diceGameState.betAmount, 'Dice game loss');
                        
                        // Update games played
                        if (currentUser) {
                            currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                        }
                    }
                    
                    diceRollButton.disabled = false;
                }
            }, 100);
        }
        
        function getDiceFace(number) {
            const diceFaces = ['⚀', '⚁', '⚂', '⚃', '⚄', '⚅'];
            return diceFaces[number - 1];
        }
        
        // Roulette Game Logic
        function initializeRouletteGame() {
            // Set up roulette bet options
            document.querySelectorAll('.roulette-bet-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.roulette-bet-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    rouletteGameState.selectedBet = this.dataset.bet;
                });
            });
        }
        
        function spinRoulette() {
            if (!rouletteGameState.selectedBet) {
                alert('Please select a bet option!');
                return;
            }
            
            const betAmount = parseFloat(rouletteBetAmountInput.value);
            
            if (userBalance < betAmount) {
                alert('Insufficient balance!');
                return;
            }
            
            if (betAmount < 1.00) {
                alert('Minimum bet is 1.00 SEE');
                return;
            }
            
            rouletteGameState.betAmount = betAmount;
            
            // Deduct from user and add to vault
            userBalance -= betAmount;
            adminVaultBalance += betAmount;
            updateBalance();
            
            rouletteSpinButton.disabled = true;
            
            // Animate roulette spin
            const spins = 2 + Math.floor(Math.random() * 3); // 2-5 spins (faster)
            let currentSpin = 0;
            const totalDegrees = 360 * spins;
            
            rouletteWheel.style.transition = `transform ${spins}s ease-out`;
            rouletteWheel.style.transform = `rotate(${totalDegrees}deg)`;
            
            setTimeout(() => {
                // Determine result
                const winningNumber = Math.floor(Math.random() * 37); // 0-36
                const isRed = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(winningNumber);
                const isBlack = [2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35].includes(winningNumber);
                const isEven = winningNumber !== 0 && winningNumber % 2 === 0;
                const isOdd = winningNumber % 2 === 1;
                
                let won = false;
                
                if (rouletteGameState.selectedBet === 'red' && isRed) won = true;
                if (rouletteGameState.selectedBet === 'black' && isBlack) won = true;
                if (rouletteGameState.selectedBet === 'even' && isEven) won = true;
                if (rouletteGameState.selectedBet === 'odd' && isOdd) won = true;
                
                if (won) {
                    const winAmount = rouletteGameState.betAmount * 2; // 2x payout
                    
                    // Check if vault has enough funds
                    if (adminVaultBalance < winAmount) {
                        alert('Insufficient funds in vault!');
                        rouletteSpinButton.disabled = false;
                        return;
                    }
                    
                    // Transfer from vault to user
                    userBalance += winAmount;
                    adminVaultBalance -= winAmount;
                    updateBalance();
                    
                    rouletteResult.textContent = `You won ${(winAmount - rouletteGameState.betAmount).toFixed(2)} SEE!`;
                    recordTransaction('casino', winAmount - rouletteGameState.betAmount, 'Roulette game win');
                    updateWinningUsers(currentUser.name, winAmount - rouletteGameState.betAmount);
                    
                    // Update games played and wins
                    if (currentUser) {
                        currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                        currentUser.wins = (currentUser.wins || 0) + 1;
                    }
                } else {
                    rouletteResult.textContent = 'You lost! Try again.';
                    recordTransaction('casino', -rouletteGameState.betAmount, 'Roulette game loss');
                    
                    // Update games played
                    if (currentUser) {
                        currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                    }
                }
                
                rouletteSpinButton.disabled = false;
            }, spins * 1000);
        }
        
        // Sports Game Logic
        function initializeSportsGame() {
            if (!sportsGameState.selectedMatch) return;
            
            const match = sportsGameState.selectedMatch;
            sportsGameTitle.textContent = `${match.home} vs ${match.away}`;
            homeTeamName.textContent = match.home;
            awayTeamName.textContent = match.away;
            homeTeamFlag.textContent = match.home.substring(0, 2);
            awayTeamFlag.textContent = match.away.substring(0, 2);
            
            sportsGameState.homeScore = 0;
            sportsGameState.awayScore = 0;
            sportsGameState.matchTime = 0;
            sportsGameState.isFirstHalf = true;
            sportsGameState.events = [];
            
            sportsScore.textContent = '0 : 0';
            sportsTime.textContent = '1st Half - 00:00';
            sportsEvents.innerHTML = '';
        }
        
        function startSportsGame() {
            const betAmount = parseFloat(sportsBetAmountInput.value);
            
            if (userBalance < betAmount) {
                alert('Insufficient balance!');
                return;
            }
            
            if (betAmount < 1.00) {
                alert('Minimum bet is 1.00 SEE');
                return;
            }
            
            if (!sportsGameState.selectedBet) {
                alert('Please place a bet first!');
                return;
            }
            
            sportsGameState.betAmount = betAmount;
            
            // Deduct from user and add to vault
            userBalance -= betAmount;
            adminVaultBalance += betAmount;
            updateBalance();
            
            sportsPlayButton.disabled = true;
            
            // Record the bet
            recordBet(
                `${sportsGameState.selectedMatch.home} vs ${sportsGameState.selectedMatch.away}`,
                sportsGameState.selectedBet.type,
                sportsGameState.selectedBet.odds,
                betAmount,
                'running'
            );
            
            // Start match simulation
            simulateSportsMatch();
        }
        
        function simulateSportsMatch() {
            let time = 0;
            const matchDuration = 90; // 90 minutes simulation
            
            gameIntervals.sports = setInterval(() => {
                time++;
                sportsGameState.matchTime = time;
                
                // Update time display
                const displayTime = Math.min(time, 45);
                const half = time <= 45 ? '1st Half' : '2nd Half';
                sportsTime.textContent = `${half} - ${displayTime}:00`;
                
                // Random events (goals)
                if (Math.random() < 0.05) { // 5% chance of goal per "minute"
                    const isHomeGoal = Math.random() > 0.5;
                    if (isHomeGoal) {
                        sportsGameState.homeScore++;
                        sportsGameState.events.push(`${time}' GOAL! ${sportsGameState.selectedMatch.home} scores!`);
                    } else {
                        sportsGameState.awayScore++;
                        sportsGameState.events.push(`${time}' GOAL! ${sportsGameState.selectedMatch.away} scores!`);
                    }
                    
                    sportsScore.textContent = `${sportsGameState.homeScore} : ${sportsGameState.awayScore}`;
                    
                    // Update events display (show last 3 events)
                    const recentEvents = sportsGameState.events.slice(-3);
                    sportsEvents.innerHTML = recentEvents.map(event => 
                        `<div style="margin-bottom: 5px;">${event}</div>`
                    ).join('');
                }
                
                // Check for half time
                if (time === 45) {
                    sportsGameState.events.push("HALF TIME!");
                }
                
                // End of match
                if (time >= matchDuration) {
                    clearInterval(gameIntervals.sports);
                    endSportsMatch();
                }
            }, 1000); // 1 second = 1 minute in simulation
        }
        
        function endSportsMatch() {
            // Determine bet result
            let betWon = false;
            const selectedBet = sportsGameState.selectedBet;
            
            if (selectedBet.type === 'home' && sportsGameState.homeScore > sportsGameState.awayScore) {
                betWon = true;
            } else if (selectedBet.type === 'away' && sportsGameState.awayScore > sportsGameState.homeScore) {
                betWon = true;
            } else if (selectedBet.type === 'draw' && sportsGameState.homeScore === sportsGameState.awayScore) {
                betWon = true;
            }
            
            // Calculate result
            if (betWon) {
                const winAmount = sportsGameState.betAmount * selectedBet.odds;
                
                // Check if vault has enough funds
                if (adminVaultBalance < winAmount) {
                    alert('Insufficient funds in vault!');
                    sportsPlayButton.disabled = false;
                    return;
                }
                
                // Transfer from vault to user
                userBalance += winAmount;
                adminVaultBalance -= winAmount;
                updateBalance();
                
                alert(`Congratulations! You won ${(winAmount - sportsGameState.betAmount).toFixed(2)} SEE!`);
                recordTransaction('sports', winAmount - sportsGameState.betAmount, 'Sports bet win');
                updateWinningUsers(currentUser.name, winAmount - sportsGameState.betAmount);
                
                // Update bet status
                updateBetStatus('won');
                
                // Update games played and wins
                if (currentUser) {
                    currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                    currentUser.wins = (currentUser.wins || 0) + 1;
                }
            } else {
                alert('Sorry, you lost this bet. Better luck next time!');
                recordTransaction('sports', -sportsGameState.betAmount, 'Sports bet loss');
                
                // Update bet status
                updateBetStatus('lost');
                
                // Update games played
                if (currentUser) {
                    currentUser.gamesPlayed = (currentUser.gamesPlayed || 0) + 1;
                }
            }
            
            sportsPlayButton.disabled = false;
        }
        
        function updateBetStatus(status) {
            // Update the bet status in user's bet history
            if (currentUser && currentUser.bets) {
                const latestBet = currentUser.bets[0];
                if (latestBet) {
                    latestBet.status = status;
                }
            }
        }
        
        // Bet Slip Functions
        function addToBetSlip(match, betType, odds) {
            const existingItem = betSlipItems.find(item => 
                item.match === match && item.betType === betType);
            
            if (!existingItem) {
                betSlipItems.push({
                    match,
                    betType,
                    odds: parseFloat(odds),
                    amount: parseFloat(betAmountInput.value)
                });
            }
            
            updateBetSlip();
            betSlip.classList.remove('hidden');
        }
        
        function updateBetSlip() {
            betSlipContent.innerHTML = '';
            
            if (betSlipItems.length === 0) {
                betSlipContent.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.7;">No bets in slip</div>';
                return;
            }
            
            let totalStake = 0;
            let potentialWin = 0;
            
            betSlipItems.forEach((item, index) => {
                const itemStake = item.amount;
                const itemWin = itemStake * item.odds;
                
                totalStake += itemStake;
                potentialWin += itemWin;
                
                const betItem = document.createElement('div');
                betItem.className = 'bet-slip-item';
                betItem.innerHTML = `
                    <div style="font-size: 12px; margin-bottom: 5px;">${item.match}</div>
                    <div style="font-size: 14px; font-weight: bold; margin-bottom: 5px;">${item.betType} @ ${item.odds}</div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                        <span>Stake: ${itemStake} SEE</span>
                        <span>Win: ${itemWin.toFixed(2)} SEE</span>
                    </div>
                `;
                betSlipContent.appendChild(betItem);
            });
            
            const totalElement = document.createElement('div');
            totalElement.style.marginTop = '10px';
            totalElement.style.paddingTop = '10px';
            totalElement.style.borderTop = '1px solid rgba(255,255,255,0.2)';
            totalElement.innerHTML = `
                <div style="display: flex; justify-content: space-between; font-size: 14px; font-weight: bold;">
                    <span>Total Stake:</span>
                    <span>${totalStake.toFixed(2)} SEE</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 12px; margin-top: 5px;">
                    <span>Potential Win:</span>
                    <span>${potentialWin.toFixed(2)} SEE</span>
                </div>
            `;
            betSlipContent.appendChild(totalElement);
        }
        
        function placeBet() {
            if (betSlipItems.length === 0) {
                alert('No bets to place!');
                return;
            }
            
            const totalStake = betSlipItems.reduce((sum, item) => sum + item.amount, 0);
            
            if (userBalance < totalStake) {
                alert('Insufficient balance!');
                return;
            }
            
            // Deduct from user and add to vault
            userBalance -= totalStake;
            adminVaultBalance += totalStake;
            updateBalance();
            
            // Record all bets
            betSlipItems.forEach(item => {
                recordBet(item.match, item.betType, item.odds, item.amount, 'open');
            });
            
            alert('Bets placed successfully! Good luck!');
            
            betSlipItems = [];
            betSlip.classList.add('hidden');
        }
        
        // Admin Functions
        function loadAdminPanel() {
            // Load all users from Firestore
            db.collection('users').get().then((querySnapshot) => {
                usersList.innerHTML = '';
                let totalUsers = 0;
                let totalBalance = 0;
                
                querySnapshot.forEach((doc) => {
                    const user = doc.data();
                    totalUsers++;
                    totalBalance += user.balance || 0;
                    
                    const userItem = document.createElement('div');
                    userItem.className = 'user-item';
                    userItem.innerHTML = `
                        <div class="user-info">
                            <div class="user-name">${user.name}</div>
                            <div class="user-email">${user.email}</div>
                        </div>
                        <div class="user-balance">${(user.balance || 0).toFixed(2)} SEE</div>
                        <div class="user-actions">
                            <button class="user-action" title="Add Coins" data-email="${user.email}">
                                <i class="fas fa-coins"></i>
                            </button>
                            <button class="user-action" title="Ban User" data-email="${user.email}">
                                <i class="fas fa-ban"></i>
                            </button>
                            <button class="user-action" title="Message User" data-email="${user.email}">
                                <i class="fas fa-envelope"></i>
                            </button>
                        </div>
                    `;
                    usersList.appendChild(userItem);
                });
                
                // Update admin stats
                document.getElementById('totalUsers').textContent = totalUsers;
                document.getElementById('totalBalance').textContent = `${totalBalance.toFixed(2)} SEE`;
                
                // Add event listeners to user action buttons
                document.querySelectorAll('.user-action[title="Add Coins"]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const email = btn.dataset.email;
                        addCoinsToUser(email);
                    });
                });
                
                document.querySelectorAll('.user-action[title="Ban User"]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const email = btn.dataset.email;
                        banUser(email);
                    });
                });
                
                document.querySelectorAll('.user-action[title="Message User"]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const email = btn.dataset.email;
                        messageUser(email);
                    });
                });
                
            }).catch((error) => {
                console.error('Error loading users:', error);
                alert('Error loading users. Please try again.');
            });
        }
        
        function addCoinsToUser(email) {
            const amount = parseFloat(prompt(`Enter amount of SEE to add to ${email}:`));
            if (!amount || isNaN(amount) || amount <= 0) {
                alert('Invalid amount!');
                return;
            }
            
            // Check if vault has enough funds
            if (adminVaultBalance < amount) {
                alert('Insufficient funds in vault!');
                return;
            }
            
            // Find user and update balance
            db.collection('users').where('email', '==', email).get().then((querySnapshot) => {
                if (!querySnapshot.empty) {
                    const userDoc = querySnapshot.docs[0];
                    const userData = userDoc.data();
                    
                    // Update user balance
                    db.collection('users').doc(userDoc.id).update({
                        balance: firebase.firestore.FieldValue.increment(amount)
                    }).then(() => {
                        // Update vault balance
                        adminVaultBalance -= amount;
                        updateBalance();
                        
                        alert(`Added ${amount} SEE to ${email}`);
                        
                        // Reload users list
                        loadAdminPanel();
                    }).catch((error) => {
                        console.error('Error updating user balance:', error);
                        alert('Error adding coins. Please try again.');
                    });
                } else {
                    alert('User not found!');
                }
            }).catch((error) => {
                console.error('Error finding user:', error);
                alert('Error finding user. Please try again.');
            });
        }
        
        function banUser(email) {
            const reason = prompt(`Enter reason for banning ${email}:`);
            if (!reason) return;
            
            // Find user and ban them
            db.collection('users').where('email', '==', email).get().then((querySnapshot) => {
                if (!querySnapshot.empty) {
                    const userDoc = querySnapshot.docs[0];
                    const userData = userDoc.data();
                    
                    // Get user's balance to transfer to vault
                    const userBalance = userData.balance || 0;
                    
                    // Update user as banned and reset balance
                    db.collection('users').doc(userDoc.id).update({
                        banned: true,
                        balance: 0
                    }).then(() => {
                        // Transfer user's balance to vault
                        adminVaultBalance += userBalance;
                        updateBalance();
                        
                        alert(`User ${email} has been banned. Their ${userBalance} SEE has been transferred to vault.`);
                        
                        // Reload users list
                        loadAdminPanel();
                    }).catch((error) => {
                        console.error('Error banning user:', error);
                        alert('Error banning user. Please try again.');
                    });
                } else {
                    alert('User not found!');
                }
            }).catch((error) => {
                console.error('Error finding user:', error);
                alert('Error finding user. Please try again.');
            });
        }
        
        function messageUser(email) {
            const message = prompt(`Enter message to send to ${email}:`);
            if (!message) return;
            
            // In a real app, this would send a message to the user's inbox
            alert(`Message sent to ${email}`);
        }
        
        function setCoinPrice() {
            const newPrice = parseFloat(coinPriceInput.value);
            if (!newPrice || isNaN(newPrice) || newPrice <= 0) {
                alert('Invalid price!');
                return;
            }
            
            coinPrice = newPrice;
            alert(`SEE coin price set to $${coinPrice}`);
            updateBalance();
        }
        
        // Transfer coins between users
        function transferCoins() {
            const recipientEmail = transferEmail.value.trim();
            const amount = parseFloat(transferAmount.value);
            const pin = transferPin.value;
            
            if (!recipientEmail || !amount || !pin) {
                alert('Please fill in all fields');
                return;
            }
            
            if (amount < 1.00) {
                alert('Minimum transfer amount is 1.00 SEE');
                return;
            }
            
            if (userBalance < amount) {
                alert('Insufficient balance');
                return;
            }
            
            if (pin !== currentUser.pin) {
                alert('Invalid PIN');
                return;
            }
            
            setButtonLoading(transferButton, transferButtonText, transferButtonLoading, true);
            
            // Check if recipient exists
            db.collection('users').where('email', '==', recipientEmail).get().then((querySnapshot) => {
                if (querySnapshot.empty) {
                    alert('Recipient not found');
                    setButtonLoading(transferButton, transferButtonText, transferButtonLoading, false);
                    return;
                }
                
                const recipientDoc = querySnapshot.docs[0];
                const recipientData = recipientDoc.data();
                
                if (recipientData.banned) {
                    alert('Cannot transfer to banned user');
                    setButtonLoading(transferButton, transferButtonText, transferButtonLoading, false);
                    return;
                }
                
                // Perform the transfer
                const batch = db.batch();
                
                // Deduct from sender
                batch.update(db.collection('users').doc(currentUser.uid), {
                    balance: firebase.firestore.FieldValue.increment(-amount)
                });
                
                // Add to recipient
                batch.update(db.collection('users').doc(recipientDoc.id), {
                    balance: firebase.firestore.FieldValue.increment(amount)
                });
                
                return batch.commit();
            }).then(() => {
                // Update local balance
                userBalance -= amount;
                updateBalance();
                
                // Record transaction
                recordTransaction('transfer', -amount, `Transfer to ${recipientEmail}`);
                
                alert(`Successfully transferred ${amount} SEE to ${recipientEmail}`);
                
                // Clear form
                transferEmail.value = '';
                transferAmount.value = '';
                transferPin.value = '';
                
                setButtonLoading(transferButton, transferButtonText, transferButtonLoading, false);
            }).catch((error) => {
                console.error('Error transferring coins:', error);
                alert('Error transferring coins. Please try again.');
                setButtonLoading(transferButton, transferButtonText, transferButtonLoading, false);
            });
        }
        
        // Send message to admin
        function sendMessageToAdmin() {
            const content = messageContent.value.trim();
            if (!content) {
                alert('Please enter a message');
                return;
            }
            
            const message = {
                from: currentUser.name,
                content: content,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            // In a real app, this would save to Firestore
            // For now, we'll just show a confirmation
            alert('Message sent to admin!');
            messageContent.value = '';
            
            // Add to local messages
            if (!currentUser.messages) {
                currentUser.messages = [];
            }
            currentUser.messages.push(message);
            loadMessages();
        }
        
        // Claim referral bonus
        function claimReferralBonus() {
            const referralCount = currentUser.referrals ? currentUser.referrals.length : 0;
            if (referralCount < 10) {
                alert(`You need ${10 - referralCount} more referrals to claim the bonus`);
                return;
            }
            
            // Check if vault has enough funds
            if (adminVaultBalance < 1) {
                alert('Insufficient funds in vault!');
                return;
            }
            
            // Transfer from vault to user
            userBalance += 1;
            adminVaultBalance -= 1;
            updateBalance();
            
            alert('Referral bonus of 1 SEE has been added to your account!');
            recordTransaction('referral', 1, 'Referral bonus');
            
            // Reset referrals count (in a real app, you might want to track claimed referrals)
            currentUser.referrals = [];
            updateProfile();
        }
        
        // Mines controls
        decreaseMines.addEventListener('click', () => {
            if (minesGameState.minesCount > 1) {
                minesGameState.minesCount--;
                minesCount.textContent = minesGameState.minesCount;
                generateMinesGrid();
            }
        });
        
        increaseMines.addEventListener('click', () => {
            if (minesGameState.minesCount < 10) {
                minesGameState.minesCount++;
                minesCount.textContent = minesGameState.minesCount;
                generateMinesGrid();
            }
        });
        
        // Event Listeners for Navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                switchTab(tab.dataset.tab);
            });
        });
        
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                switchBottomNav(item.dataset.nav);
            });
        });
        
        // Transaction tabs
        document.querySelectorAll('.transaction-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.transaction-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                // In a real app, this would filter transactions
                loadTransactionHistory();
            });
        });
        
        // Bet tabs
        document.querySelectorAll('.bet-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.bet-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                // In a real app, this would filter bets
                loadBetHistory();
            });
        });
        
        // Game card clicks
        document.querySelectorAll('.game-card').forEach(card => {
            card.addEventListener('click', () => {
                const gameName = card.dataset.game;
                startGame(gameName);
            });
        });
        
        // Sports betting
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('odd')) {
                const matchId = e.target.dataset.match;
                const betType = e.target.dataset.bet;
                const odds = e.target.dataset.odd;
                
                const match = sportsMatches.find(m => m.id == matchId);
                const matchName = `${match.home} vs ${match.away}`;
                
                // For sports visual, start the game directly
                sportsGameState.selectedMatch = match;
                sportsGameState.selectedBet = {
                    type: betType,
                    odds: parseFloat(odds)
                };
                startGame('sports');
            }
        });
        
        // Game controls
        aviatorBetButton.addEventListener('click', startAviatorGame);
        aviatorCashoutButton.addEventListener('click', cashoutAviator);
        aviatorBackBtn.addEventListener('click', exitGame);
        
        minesPlayButton.addEventListener('click', startMinesGame);
        minesCashoutButton.addEventListener('click', cashoutMines);
        minesBackBtn.addEventListener('click', exitGame);
        
        diceRollButton.addEventListener('click', rollDice);
        diceBackBtn.addEventListener('click', exitGame);
        
        rouletteSpinButton.addEventListener('click', spinRoulette);
        rouletteBackBtn.addEventListener('click', exitGame);
        
        sportsPlayButton.addEventListener('click', startSportsGame);
        sportsBackBtn.addEventListener('click', exitGame);
        
        // Bet slip controls
        closeBetSlip.addEventListener('click', () => {
            betSlip.classList.add('hidden');
        });
        
        placeBetBtn.addEventListener('click', placeBet);
        
        clearBetSlipBtn.addEventListener('click', () => {
            betSlipItems = [];
            betSlip.classList.add('hidden');
        });
        
        // Copy referral code
        copyReferralBtn.addEventListener('click', () => {
            userReferralCode.select();
            document.execCommand('copy');
            alert('Referral code copied to clipboard!');
        });
        
        // Claim referral bonus
        claimReferralBtn.addEventListener('click', claimReferralBonus);
        
        // Send message to admin
        sendMessageBtn.addEventListener('click', sendMessageToAdmin);
        
        // Transfer coins
        transferButton.addEventListener('click', transferCoins);
        
        // Admin functions
        addCoinsBtn.addEventListener('click', () => {
            const email = prompt('Enter user email:');
            if (email) {
                addCoinsToUser(email);
            }
        });
        
        banUserBtn.addEventListener('click', () => {
            const email = prompt('Enter user email to ban:');
            if (email) {
                banUser(email);
            }
        });
        
        messageUserBtn.addEventListener('click', () => {
            const email = prompt('Enter user email to message:');
            if (email) {
                messageUser(email);
            }
        });
        
        viewReportsBtn.addEventListener('click', () => {
            alert('Reports feature would be implemented here');
        });
        
        setCoinPriceBtn.addEventListener('click', setCoinPrice);
        
        // Auth Event Listeners
        showRegister.addEventListener('click', (e) => {
            e.preventDefault();
            showScreen(registerScreen);
        });
        
        showLogin.addEventListener('click', (e) => {
            e.preventDefault();
            showScreen(loginScreen);
        });
        
        showAdminLogin.addEventListener('click', (e) => {
            e.preventDefault();
            showScreen(adminLoginScreen);
        });
        
        showUserLogin.addEventListener('click', (e) => {
            e.preventDefault();
            showScreen(loginScreen);
        });
        
        // Login function
        loginButton.addEventListener('click', () => {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }
            
            setButtonLoading(loginButton, loginButtonText, loginButtonLoading, true);
            
            // Check if admin login
            if (email === 'ebubechichukwu8@gmail.com' && password === 'Ebube@123') {
                isAdmin = true;
                showScreen(adminPanel);
                loadAdminPanel();
                setButtonLoading(loginButton, loginButtonText, loginButtonLoading, false);
                return;
            }
            
            // User login with Firebase Auth
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Get user data from Firestore
                    return db.collection('users').doc(userCredential.user.uid).get();
                })
                .then((doc) => {
                    if (doc.exists) {
                        const userData = doc.data();
                        
                        // Check if user is banned
                        if (userData.banned) {
                            alert('Your account has been banned. Please contact support.');
                            auth.signOut();
                            setButtonLoading(loginButton, loginButtonText, loginButtonLoading, false);
                            return;
                        }
                        
                        currentUser = {
                            uid: doc.id,
                            ...userData
                        };
                        userBalance = userData.balance || 0;
                        
                        updateBalance();
                        updateProfile();
                        showScreen(appScreen);
                    } else {
                        alert('User data not found');
                    }
                    setButtonLoading(loginButton, loginButtonText, loginButtonLoading, false);
                })
                .catch((error) => {
                    console.error('Login error:', error);
                    alert('Login failed: ' + error.message);
                    setButtonLoading(loginButton, loginButtonText, loginButtonLoading, false);
                });
        });
        
        // Register function
        registerButton.addEventListener('click', () => {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            const pin = document.getElementById('registerPin').value;
            const age = document.getElementById('registerAge').value;
            const country = document.getElementById('registerCountry').value;
            const referralCode = document.getElementById('referralCodeInput').value;
            
            if (!name || !email || !password || !confirmPassword || !pin || !age || !country) {
                alert('Please fill in all required fields');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            
            if (pin.length !== 4 || isNaN(pin)) {
                alert('PIN must be 4 digits');
                return;
            }
            
            if (parseInt(age) < 17) {
                alert('You must be at least 17 years old to register');
                return;
            }
            
            setButtonLoading(registerButton, registerButtonText, registerButtonLoading, true);
            
            // Create user with Firebase Auth
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    
                    // Generate referral code
                    const referralCode = generateReferralCode();
                    
                    // Create user document in Firestore
                    return db.collection('users').doc(user.uid).set({
                        name: name,
                        email: email,
                        pin: pin,
                        age: parseInt(age),
                        country: country,
                        balance: 0,
                        referralCode: referralCode,
                        referrals: [],
                        transactions: [],
                        bets: [],
                        messages: [],
                        gamesPlayed: 0,
                        wins: 0,
                        banned: false,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                })
                .then(() => {
                    alert('Registration successful! You can now login.');
                    showScreen(loginScreen);
                    setButtonLoading(registerButton, registerButtonText, registerButtonLoading, false);
                })
                .catch((error) => {
                    console.error('Registration error:', error);
                    alert('Registration failed: ' + error.message);
                    setButtonLoading(registerButton, registerButtonText, registerButtonLoading, false);
                });
        });
        
        // Admin login
        adminLoginButton.addEventListener('click', () => {
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            
            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }
            
            setButtonLoading(adminLoginButton, adminLoginButtonText, adminLoginButtonLoading, true);
            
            if (email === 'ebubechichukwu8@gmail.com' && password === 'Ebube@123') {
                isAdmin = true;
                showScreen(adminPanel);
                loadAdminPanel();
            } else {
                alert('Invalid admin credentials!');
            }
            setButtonLoading(adminLoginButton, adminLoginButtonText, adminLoginButtonLoading, false);
        });
        
        // Logout functions
        logoutButton.addEventListener('click', () => {
            if (confirm('Are you sure you want to logout?')) {
                auth.signOut().then(() => {
                    currentUser = null;
                    userBalance = 0;
                    showScreen(loginScreen);
                });
            }
        });
        
        adminLogoutButton.addEventListener('click', () => {
            if (confirm('Are you sure you want to logout from admin panel?')) {
                isAdmin = false;
                showScreen(loginScreen);
            }
        });
        
        // Initialize app
        showScreen(loginScreen);
        
        // Check if user is already logged in
        auth.onAuthStateChanged((user) => {
            if (user && !currentUser && !isAdmin) {
                // User is signed in, get user data
                db.collection('users').doc(user.uid).get().then((doc) => {
                    if (doc.exists) {
                        const userData = doc.data();
                        
                        if (userData.banned) {
                            alert('Your account has been banned. Please contact support.');
                            auth.signOut();
                            return;
                        }
                        
                        currentUser = {
                            uid: doc.id,
                            ...userData
                        };
                        userBalance = userData.balance || 0;
                        
                        updateBalance();
                        updateProfile();
                        showScreen(appScreen);
                    }
                });
            }
        });
    </script>
</body>
</html>

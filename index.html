<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeePlay - World's Best Casino App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1a237e;
            --secondary: #00b0ff;
            --accent: #ff4081;
            --dark: #0d1b2a;
            --light: #f5f5f5;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --gray: #9e9e9e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            overflow-x: hidden;
        }
        
        .container {
            max-width: 480px;
            margin: 0 auto;
            background-color: var(--dark);
            min-height: 100vh;
            position: relative;
            padding-bottom: 70px;
        }
        
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 28px;
        }
        
        .time-display {
            font-size: 14px;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        .winning-users {
            margin-top: 10px;
            font-size: 12px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .winning-user {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Main Content */
        .main-content {
            padding: 15px;
        }
        
        /* Balance Card */
        .balance-card {
            background: linear-gradient(135deg, var(--primary), #3949ab);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        .balance-title {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .balance-amount {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .balance-stats {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 14px;
        }
        
        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
        }
        
        .nav-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .nav-tab.active {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0 15px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
        }
        
        .view-all {
            font-size: 14px;
            color: var(--secondary);
        }
        
        /* Games Grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .game-card {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px 10px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .game-icon {
            font-size: 24px;
            margin-bottom: 8px;
            color: var(--secondary);
        }
        
        .game-name {
            font-size: 12px;
            font-weight: 500;
        }
        
        /* Promo Banner */
        .promo-banner {
            background: linear-gradient(135deg, var(--accent), #ff79a6);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        .promo-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .promo-subtitle {
            font-size: 14px;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .promo-button {
            background-color: var(--light);
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .promo-button:hover {
            transform: scale(1.05);
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(13, 27, 42, 0.95);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            max-width: 480px;
            margin: 0 auto;
        }
        
        .nav-item {
            text-align: center;
            color: var(--gray);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
        }
        
        .nav-item.active {
            color: var(--secondary);
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        /* Auth Screens */
        .auth-screen {
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        
        .auth-logo {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .auth-form {
            width: 100%;
            max-width: 350px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--light);
            font-size: 16px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .auth-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .auth-link {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
        }
        
        .auth-link a {
            color: var(--secondary);
            text-decoration: none;
        }
        
        /* Game Screens */
        .game-screen {
            padding: 15px;
            min-height: 100vh;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .game-title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .game-balance {
            font-size: 18px;
            font-weight: bold;
        }
        
        .game-area {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .bet-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .bet-amount {
            font-size: 18px;
            font-weight: bold;
        }
        
        .bet-button {
            background-color: var(--secondary);
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .bet-button:hover {
            transform: scale(1.05);
        }
        
        .bet-button:disabled {
            background-color: var(--gray);
            cursor: not-allowed;
        }
        
        /* Mines Specific */
        .mines-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mine-cell {
            width: 50px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mine-cell.revealed {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .mine-cell.mine {
            background-color: var(--danger);
        }
        
        .mine-cell.gem {
            background-color: var(--success);
        }
        
        .mines-settings {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .mines-setting {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .mines-setting-label {
            font-size: 12px;
            margin-bottom: 5px;
            opacity: 0.8;
        }
        
        .mines-setting-value {
            font-size: 16px;
            font-weight: bold;
        }
        
        .mines-setting-controls {
            display: flex;
            gap: 10px;
        }
        
        .mines-control-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--light);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .mines-multiplier-display {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .mines-cashout-amount {
            font-size: 16px;
            margin-bottom: 10px;
            text-align: center;
        }
        
        /* Admin Panel */
        .admin-panel {
            padding: 15px;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .admin-title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .admin-stat {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .admin-stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .admin-stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .admin-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .admin-action {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            padding: 12px;
            color: var(--light);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .admin-action:hover {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        .users-list {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-weight: bold;
        }
        
        .user-email {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .user-balance {
            font-weight: bold;
            margin-right: 10px;
        }
        
        .user-actions {
            display: flex;
            gap: 5px;
        }
        
        .user-action {
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            padding: 5px;
        }
        
        /* Profile Page */
        .profile-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 15px;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .profile-email {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .profile-stat {
            text-align: center;
        }
        
        .profile-stat-value {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .profile-stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        /* Referral Section */
        .referral-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .referral-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .referral-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        /* Transaction History */
        .transaction-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .transaction-tabs {
            display: flex;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 15px;
        }
        
        .transaction-tab {
            flex: 1;
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .transaction-tab.active {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        .transaction-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .transaction-amount.positive {
            color: var(--success);
        }
        
        .transaction-amount.negative {
            color: var(--danger);
        }
        
        /* Inbox Section */
        .inbox-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .message-item {
            padding: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .message-sender {
            font-weight: bold;
        }
        
        .message-time {
            font-size: 12px;
            opacity: 0.7;
        }
        
        .message-preview {
            font-size: 14px;
            opacity: 0.8;
        }
        
        /* Hidden class for toggling screens */
        .hidden {
            display: none;
        }
        
        /* Logout Button */
        .logout-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 16px;
        }
        
        /* Back Button */
        .back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 16px;
        }
        
        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Chart Container */
        .chart-container {
            width: 100%;
            height: 200px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="auth-screen">
        <div class="auth-logo">
            <i class="fas fa-water"></i> SeePlay
        </div>
        <div class="auth-form">
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" id="loginEmail" class="form-input" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password">
            </div>
            <button id="loginButton" class="auth-button">
                <span id="loginButtonText">Login</span>
                <span id="loginButtonSpinner" class="loading hidden"></span>
            </button>
            <div class="auth-link">
                Don't have an account? <a href="#" id="showRegister">Register</a>
            </div>
            <div class="auth-link">
                <a href="#" id="showAdminLogin">Login as Lord</a>
            </div>
        </div>
    </div>
    
    <!-- Admin Login Screen -->
    <div id="adminLoginScreen" class="auth-screen hidden">
        <div class="auth-logo">
            <i class="fas fa-crown"></i> Lord Panel
        </div>
        <div class="auth-form">
            <div class="form-group">
                <label class="form-label">Admin Email</label>
                <input type="email" id="adminEmail" class="form-input" placeholder="Enter admin email">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" id="adminPassword" class="form-input" placeholder="Enter admin password">
            </div>
            <button id="adminLoginButton" class="auth-button">
                <span id="adminLoginButtonText">Login as Lord</span>
                <span id="adminLoginButtonSpinner" class="loading hidden"></span>
            </button>
            <div class="auth-link">
                <a href="#" id="showUserLogin">Back to User Login</a>
            </div>
        </div>
    </div>
    
    <!-- Register Screen -->
    <div id="registerScreen" class="auth-screen hidden">
        <div class="auth-logo">
            <i class="fas fa-water"></i> SeePlay
        </div>
        <div class="auth-form">
            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" id="registerName" class="form-input" placeholder="Enter your full name">
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" id="registerEmail" class="form-input" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" id="registerPassword" class="form-input" placeholder="Create a password">
            </div>
            <div class="form-group">
                <label class="form-label">Confirm Password</label>
                <input type="password" id="registerConfirmPassword" class="form-input" placeholder="Confirm your password">
            </div>
            <div class="form-group">
                <label class="form-label">4-Digit PIN</label>
                <input type="password" id="registerPin" class="form-input" placeholder="Create a 4-digit PIN" maxlength="4">
            </div>
            <div class="form-group">
                <label class="form-label">Age</label>
                <input type="number" id="registerAge" class="form-input" placeholder="Enter your age">
            </div>
            <div class="form-group">
                <label class="form-label">Country</label>
                <select id="registerCountry" class="form-input">
                    <option value="">Select your country</option>
                    <option value="nigeria">Nigeria</option>
                    <option value="ghana">Ghana</option>
                    <option value="south-africa">South Africa</option>
                    <option value="kenya">Kenya</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Referral Code (Optional)</label>
                <input type="text" id="referralCodeInput" class="form-input" placeholder="Enter referral code if any">
            </div>
            <button id="registerButton" class="auth-button">
                <span id="registerButtonText">Create Account</span>
                <span id="registerButtonSpinner" class="loading hidden"></span>
            </button>
            <div class="auth-link">
                Already have an account? <a href="#" id="showLogin">Login</a>
            </div>
        </div>
    </div>
    
    <!-- Main App Screen -->
    <div id="appScreen" class="container hidden">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <i class="fas fa-water"></i> SeePlay
            </div>
            <div class="time-display" id="currentTime">9:25</div>
            <div class="winning-users" id="winningUsers">
                <!-- Winning users will be displayed here -->
            </div>
            <button class="logout-btn" id="logoutButton">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Balance Card -->
            <div class="balance-card">
                <div class="balance-title">Your Balance</div>
                <div class="balance-amount" id="userBalance">0 SEE</div>
                <div class="balance-stats">
                    <div class="stat-item">
                        <div>USD Value</div>
                        <div class="stat-value" id="usdValue">$0.00</div>
                    </div>
                    <div class="stat-item">
                        <div>Coin Price</div>
                        <div class="stat-value" id="coinPrice">$1.01</div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Tabs -->
            <div class="nav-tabs">
                <div class="nav-tab active" data-tab="games">Games</div>
                <div class="nav-tab" data-tab="transfer">Transfer</div>
                <div class="nav-tab" data-tab="transactions">Transactions</div>
                <div class="nav-tab" data-tab="profile">Profile</div>
            </div>
            
            <!-- Games Section -->
            <div id="gamesSection" class="tab-content">
                <div class="section-header">
                    <div class="section-title">Popular Games</div>
                </div>
                
                <div class="games-grid">
                    <div class="game-card" data-game="mines">
                        <div class="game-icon"><i class="fas fa-bomb"></i></div>
                        <div class="game-name">Mines</div>
                    </div>
                </div>
                
                <div class="promo-banner">
                    <div class="promo-title">CLAIM FREE BETS</div>
                    <div class="promo-subtitle">WORTH NGN 6,500,000 WEEKLY</div>
                    <button class="promo-button">PLAY NOW</button>
                </div>
            </div>
            
            <!-- Transfer Section -->
            <div id="transferSection" class="tab-content hidden">
                <div class="section-header">
                    <div class="section-title">Transfer SEE Coins</div>
                </div>
                
                <div class="profile-section">
                    <div class="form-group">
                        <label class="form-label">Recipient Email</label>
                        <input type="email" id="transferEmail" class="form-input" placeholder="Enter recipient's email">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Amount (Min. 1 SEE)</label>
                        <input type="number" id="transferAmount" class="form-input" placeholder="Enter amount">
                    </div>
                    <div class="form-group">
                        <label class="form-label">4-Digit PIN</label>
                        <input type="password" id="transferPin" class="form-input" placeholder="Enter your PIN" maxlength="4">
                    </div>
                    <button class="auth-button" id="transferButton">Send SEE</button>
                </div>
            </div>
            
            <!-- Transactions Section -->
            <div id="transactionsSection" class="tab-content hidden">
                <div class="section-header">
                    <div class="section-title">Transaction History</div>
                </div>
                
                <div class="transaction-section">
                    <div class="transaction-tabs">
                        <div class="transaction-tab active" data-transaction-tab="all">All</div>
                        <div class="transaction-tab" data-transaction-tab="deposit">Deposits</div>
                        <div class="transaction-tab" data-transaction-tab="withdrawal">Withdrawals</div>
                        <div class="transaction-tab" data-transaction-tab="game">Games</div>
                    </div>
                    
                    <div class="transaction-list" id="transactionList">
                        <!-- Transactions will be listed here -->
                    </div>
                </div>
            </div>
            
            <!-- Profile Section -->
            <div id="profileSection" class="tab-content hidden">
                <div class="profile-section">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="profile-info">
                            <div class="profile-name" id="profileUserName">User Name</div>
                            <div class="profile-email" id="profileUserEmail">user@example.com</div>
                        </div>
                    </div>
                    
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileGamesPlayed">0</div>
                            <div class="profile-stat-label">Games Played</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileWins">0</div>
                            <div class="profile-stat-label">Wins</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileReferrals">0</div>
                            <div class="profile-stat-label">Referrals</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="priceChart"></canvas>
                    </div>
                </div>
                
                <div class="referral-section">
                    <div class="section-header">
                        <div class="section-title">Your Referrals</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Your Referral Code</label>
                        <input type="text" class="form-input" id="userReferralCode" readonly>
                    </div>
                    <button class="auth-button" style="margin-top: 10px;" id="copyReferralBtn">Copy Referral Code</button>
                    
                    <div class="referral-list" id="referralList">
                        <!-- Referrals will be listed here -->
                    </div>
                    <button class="auth-button" id="claimReferralBtn" disabled>Claim Referral Bonus (0/10)</button>
                </div>
                
                <div class="profile-section">
                    <div class="section-header">
                        <div class="section-title">Account Settings</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Change PIN</label>
                        <input type="password" class="form-input" placeholder="Enter new 4-digit PIN" maxlength="4">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" data-nav="home">
                <div class="nav-icon"><i class="fas fa-home"></i></div>
                <div>Home</div>
            </div>
            <div class="nav-item" data-nav="games">
                <div class="nav-icon"><i class="fas fa-gamepad"></i></div>
                <div>Games</div>
            </div>
            <div class="nav-item" data-nav="transfer">
                <div class="nav-icon"><i class="fas fa-exchange-alt"></i></div>
                <div>Transfer</div>
            </div>
            <div class="nav-item" data-nav="transactions">
                <div class="nav-icon"><i class="fas fa-history"></i></div>
                <div>History</div>
            </div>
            <div class="nav-item" data-nav="profile">
                <div class="nav-icon"><i class="fas fa-user"></i></div>
                <div>Profile</div>
            </div>
        </div>
    </div>
    
    <!-- Game Screens -->
    <div id="gameScreens" class="hidden">
        <!-- Mines Game -->
        <div id="minesGame" class="game-screen hidden">
            <button class="back-btn" id="minesBackBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="game-header">
                <div class="game-title">Mines</div>
                <div class="game-balance" id="minesBalance">0 SEE</div>
            </div>
            
            <div class="mines-settings">
                <div class="mines-setting">
                    <div class="mines-setting-label">Mines</div>
                    <div class="mines-setting-value" id="minesCount">3</div>
                    <div class="mines-setting-controls">
                        <button class="mines-control-btn" id="decreaseMines">-</button>
                        <button class="mines-control-btn" id="increaseMines">+</button>
                    </div>
                </div>
                <div class="mines-setting">
                    <div class="mines-setting-label">Bet Amount</div>
                    <div class="mines-setting-value" id="minesBetAmountDisplay">0.20 SEE</div>
                    <div class="mines-setting-controls">
                        <button class="mines-control-btn" id="decreaseBet">-</button>
                        <button class="mines-control-btn" id="increaseBet">+</button>
                    </div>
                </div>
            </div>
            
            <div class="game-area">
                <div class="mines-multiplier-display" id="minesMultiplier">Multiplier: 1.00x</div>
                <div class="mines-cashout-amount" id="minesCashoutAmount">Cashout: 0.00 SEE</div>
                <div class="mines-grid" id="minesGrid">
                    <!-- Mines grid will be generated here -->
                </div>
            </div>
            <div class="bet-controls">
                <button class="bet-button" id="minesPlayButton">PLAY</button>
                <button class="bet-button" id="minesCashoutButton" disabled>CASHOUT</button>
            </div>
        </div>
    </div>
    
    <!-- Admin Panel -->
    <div id="adminPanel" class="container hidden">
        <div class="header">
            <div class="logo">
                <i class="fas fa-crown"></i> Lord Panel
            </div>
            <button class="logout-btn" id="adminLogoutButton">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
        
        <div class="admin-panel">
            <div class="admin-header">
                <div class="admin-title">Admin Dashboard</div>
            </div>
            
            <div class="admin-stats">
                <div class="admin-stat">
                    <div class="admin-stat-value" id="totalUsers">0</div>
                    <div class="admin-stat-label">Total Users</div>
                </div>
                <div class="admin-stat">
                    <div class="admin-stat-value" id="totalBalance">0 SEE</div>
                    <div class="admin-stat-label">User Balances</div>
                </div>
                <div class="admin-stat">
                    <div class="admin-stat-value" id="vaultBalance">50,000,000,000 SEE</div>
                    <div class="admin-stat-label">Vault Balance</div>
                </div>
                <div class="admin-stat">
                    <div class="admin-stat-value" id="activeGames">0</div>
                    <div class="admin-stat-label">Active Games</div>
                </div>
            </div>
            
            <div class="admin-actions">
                <button class="admin-action" id="addCoinsBtn">Add Coins to User</button>
                <button class="admin-action" id="banUserBtn">Ban User</button>
                <button class="admin-action" id="messageUserBtn">Message User</button>
                <button class="admin-action" id="setPriceBtn">Set Coin Price</button>
            </div>
            
            <div class="section-header">
                <div class="section-title">All Users</div>
            </div>
            
            <div class="users-list" id="usersList">
                <!-- Users will be listed here -->
            </div>
        </div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDDruUr6ONHIqZqNmvbnSfMF3nTlbejcvU",
            authDomain: "seaplay-6a197.firebaseapp.com",
            projectId: "seaplay-6a197",
            storageBucket: "seaplay-6a197.firebasestorage.app",
            messagingSenderId: "419084403907",
            appId: "1:419084403907:web:2ef95d7c804c92f4808e76",
            measurementId: "G-LDY3ZLKJFF"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // DOM Elements
        const loginScreen = document.getElementById('loginScreen');
        const registerScreen = document.getElementById('registerScreen');
        const adminLoginScreen = document.getElementById('adminLoginScreen');
        const appScreen = document.getElementById('appScreen');
        const adminPanel = document.getElementById('adminPanel');
        const gameScreens = document.getElementById('gameScreens');
        
        // Auth buttons
        const loginButton = document.getElementById('loginButton');
        const loginButtonText = document.getElementById('loginButtonText');
        const loginButtonSpinner = document.getElementById('loginButtonSpinner');
        const registerButton = document.getElementById('registerButton');
        const registerButtonText = document.getElementById('registerButtonText');
        const registerButtonSpinner = document.getElementById('registerButtonSpinner');
        const adminLoginButton = document.getElementById('adminLoginButton');
        const adminLoginButtonText = document.getElementById('adminLoginButtonText');
        const adminLoginButtonSpinner = document.getElementById('adminLoginButtonSpinner');
        const logoutButton = document.getElementById('logoutButton');
        const adminLogoutButton = document.getElementById('adminLogoutButton');
        
        // Navigation
        const showRegister = document.getElementById('showRegister');
        const showLogin = document.getElementById('showLogin');
        const showAdminLogin = document.getElementById('showAdminLogin');
        const showUserLogin = document.getElementById('showUserLogin');
        
        // Game elements
        const minesPlayButton = document.getElementById('minesPlayButton');
        const minesCashoutButton = document.getElementById('minesCashoutButton');
        const minesCashoutAmount = document.getElementById('minesCashoutAmount');
        const minesMultiplier = document.getElementById('minesMultiplier');
        const minesGrid = document.getElementById('minesGrid');
        const minesBackBtn = document.getElementById('minesBackBtn');
        const minesCount = document.getElementById('minesCount');
        const minesBetAmountDisplay = document.getElementById('minesBetAmountDisplay');
        const decreaseMines = document.getElementById('decreaseMines');
        const increaseMines = document.getElementById('increaseMines');
        const decreaseBet = document.getElementById('decreaseBet');
        const increaseBet = document.getElementById('increaseBet');
        
        // Transfer elements
        const transferButton = document.getElementById('transferButton');
        const transferEmail = document.getElementById('transferEmail');
        const transferAmount = document.getElementById('transferAmount');
        const transferPin = document.getElementById('transferPin');
        
        // Profile elements
        const profileUserName = document.getElementById('profileUserName');
        const profileUserEmail = document.getElementById('profileUserEmail');
        const profileGamesPlayed = document.getElementById('profileGamesPlayed');
        const profileWins = document.getElementById('profileWins');
        const profileReferrals = document.getElementById('profileReferrals');
        const userReferralCode = document.getElementById('userReferralCode');
        const copyReferralBtn = document.getElementById('copyReferralBtn');
        const referralList = document.getElementById('referralList');
        const claimReferralBtn = document.getElementById('claimReferralBtn');
        
        // Transaction elements
        const transactionList = document.getElementById('transactionList');
        
        // Admin elements
        const addCoinsBtn = document.getElementById('addCoinsBtn');
        const banUserBtn = document.getElementById('banUserBtn');
        const messageUserBtn = document.getElementById('messageUserBtn');
        const setPriceBtn = document.getElementById('setPriceBtn');
        const usersList = document.getElementById('usersList');
        
        // App state
        let currentUser = null;
        let isAdmin = false;
        let userBalance = 0;
        let currentGame = null;
        let gameIntervals = {};
        let adminVaultBalance = 50000000000; // 50B SEE
        let coinPrice = 1.01; // Default coin price
        
        // Mines game state
        let minesGameState = {
            betAmount: 0.20,
            minesCount: 3,
            grid: [],
            revealed: [],
            gameActive: false,
            multiplier: 1.0,
            totalTiles: 25
        };
        
        // Price chart
        let priceChart = null;
        
        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            document.getElementById('currentTime').textContent = timeString;
        }
        
        setInterval(updateTime, 1000);
        updateTime();
        
        // Show/Hide Screens
        function showScreen(screen) {
            loginScreen.classList.add('hidden');
            registerScreen.classList.add('hidden');
            adminLoginScreen.classList.add('hidden');
            appScreen.classList.add('hidden');
            adminPanel.classList.add('hidden');
            gameScreens.classList.add('hidden');
            
            screen.classList.remove('hidden');
        }
        
        // Show loading state
        function showLoading(button, textElement, spinner) {
            textElement.classList.add('hidden');
            spinner.classList.remove('hidden');
            button.disabled = true;
        }
        
        // Hide loading state
        function hideLoading(button, textElement, spinner) {
            textElement.classList.remove('hidden');
            spinner.classList.add('hidden');
            button.disabled = false;
        }
        
        // Navigation Functions
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
            
            // Show selected tab content
            document.getElementById(`${tabName}Section`).classList.remove('hidden');
            
            // Update active tab
            document.querySelectorAll('.nav-tab').forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
        }
        
        function switchBottomNav(navItem) {
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.dataset.nav === navItem) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Handle navigation based on nav item
            switch(navItem) {
                case 'home':
                case 'games':
                    switchTab('games');
                    break;
                case 'transfer':
                    switchTab('transfer');
                    break;
                case 'transactions':
                    switchTab('transactions');
                    loadTransactions();
                    break;
                case 'profile':
                    switchTab('profile');
                    updateProfile();
                    break;
            }
        }
        
        // Update profile information
        function updateProfile() {
            if (!currentUser) return;
            
            profileUserName.textContent = currentUser.name || 'User Name';
            profileUserEmail.textContent = currentUser.email || 'user@example.com';
            userReferralCode.value = currentUser.referralCode || 'SEE12345';
            
            // Update referral button
            const referralCount = currentUser.referrals ? currentUser.referrals.length : 0;
            claimReferralBtn.textContent = `Claim Referral Bonus (${referralCount}/10)`;
            claimReferralBtn.disabled = referralCount < 10;
            
            // Update referral list
            updateReferralList();
            
            // Update price chart
            updatePriceChart();
        }
        
        // Update referral list
        function updateReferralList() {
            const referrals = currentUser.referrals || [];
            referralList.innerHTML = '';
            
            if (referrals.length === 0) {
                referralList.innerHTML = `
                    <div style="text-align: center; padding: 20px; opacity: 0.7;">
                        <i class="fas fa-user-friends" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <div>No referrals yet</div>
                        <div style="font-size: 12px; margin-top: 5px;">Share your code to earn 3 SEE for each referral</div>
                    </div>
                `;
            } else {
                referrals.forEach(ref => {
                    const refItem = document.createElement('div');
                    refItem.className = 'referral-item';
                    refItem.innerHTML = `
                        <div>${ref.email}</div>
                        <div>${new Date(ref.date).toLocaleDateString()}</div>
                    `;
                    referralList.appendChild(refItem);
                });
            }
        }
        
        // Update price chart
        function updatePriceChart() {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            if (priceChart) {
                priceChart.destroy();
            }
            
            // Generate sample price data
            const prices = [1.00, 1.01, 1.02, 1.00, 0.99, 1.01, 1.03, 1.02, 1.01, 1.00];
            const labels = prices.map((_, i) => `Day ${i + 1}`);
            
            priceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'SEE Coin Price ($)',
                        data: prices,
                        borderColor: '#00b0ff',
                        backgroundColor: 'rgba(0, 176, 255, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        }
                    }
                }
            });
        }
        
        // Generate unique referral code
        function generateReferralCode() {
            return 'SEE' + Math.random().toString(36).substring(2, 8).toUpperCase();
        }
        
        // Update balance display
        function updateBalance() {
            document.getElementById('userBalance').textContent = `${userBalance.toFixed(2)} SEE`;
            document.getElementById('usdValue').textContent = `$${(userBalance * coinPrice).toFixed(2)}`;
            document.getElementById('coinPrice').textContent = `$${coinPrice.toFixed(2)}`;
            
            document.querySelectorAll('.game-balance').forEach(el => {
                el.textContent = `${userBalance.toFixed(2)} SEE`;
            });
            
            // Update vault balance in admin panel
            document.getElementById('vaultBalance').textContent = `${adminVaultBalance.toLocaleString()} SEE`;
        }
        
        // Record transaction
        function recordTransaction(type, amount, description, recipient = null) {
            if (!currentUser) return;
            
            const transaction = {
                type: type,
                amount: amount,
                description: description,
                timestamp: new Date(),
                recipient: recipient,
                userId: currentUser.uid
            };
            
            // Save to Firestore
            db.collection('transactions').add(transaction)
                .then(() => {
                    console.log('Transaction recorded');
                })
                .catch(error => {
                    console.error('Error recording transaction:', error);
                });
        }
        
        // Load transactions
        function loadTransactions() {
            if (!currentUser) return;
            
            transactionList.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.7;">Loading transactions...</div>';
            
            db.collection('transactions')
                .where('userId', '==', currentUser.uid)
                .orderBy('timestamp', 'desc')
                .limit(20)
                .get()
                .then(snapshot => {
                    transactionList.innerHTML = '';
                    
                    if (snapshot.empty) {
                        transactionList.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.7;">No transactions yet</div>';
                        return;
                    }
                    
                    snapshot.forEach(doc => {
                        const transaction = doc.data();
                        const transactionItem = document.createElement('div');
                        transactionItem.className = 'transaction-item';
                        
                        const amountClass = transaction.amount >= 0 ? 'positive' : 'negative';
                        const amountSign = transaction.amount >= 0 ? '+' : '';
                        
                        transactionItem.innerHTML = `
                            <div>
                                <div style="font-weight: bold;">${transaction.description}</div>
                                <div style="font-size: 12px; opacity: 0.7;">${transaction.timestamp.toDate().toLocaleString()}</div>
                            </div>
                            <div class="transaction-amount ${amountClass}">${amountSign}${transaction.amount.toFixed(2)} SEE</div>
                        `;
                        
                        transactionList.appendChild(transactionItem);
                    });
                })
                .catch(error => {
                    console.error('Error loading transactions:', error);
                    transactionList.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.7;">Error loading transactions</div>';
                });
        }
        
        // Game Functions
        function startGame(gameName) {
            currentGame = gameName;
            appScreen.classList.add('hidden');
            document.getElementById(`${gameName}Game`).classList.remove('hidden');
            gameScreens.classList.remove('hidden');
            
            // Update game balance
            document.querySelectorAll('.game-balance').forEach(el => {
                el.textContent = `${userBalance.toFixed(2)} SEE`;
            });
            
            // Initialize specific game
            if (gameName === 'mines') {
                initializeMinesGame();
            }
        }
        
        function exitGame() {
            gameScreens.classList.add('hidden');
            appScreen.classList.remove('hidden');
            currentGame = null;
            
            // Clear any game intervals
            Object.values(gameIntervals).forEach(interval => clearInterval(interval));
            gameIntervals = {};
        }
        
        // Mines Game Logic
        function initializeMinesGame() {
            minesBetAmountDisplay.textContent = `${minesGameState.betAmount.toFixed(2)} SEE`;
            minesCount.textContent = minesGameState.minesCount;
            generateMinesGrid();
            updateMinesMultiplier();
        }
        
        function generateMinesGrid() {
            minesGrid.innerHTML = '';
            minesGameState.grid = [];
            minesGameState.revealed = [];
            minesGameState.gameActive = false;
            minesGameState.multiplier = 1.0;
            
            // Create 5x5 grid
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'mine-cell';
                cell.dataset.index = i;
                cell.innerHTML = '';
                cell.addEventListener('click', () => revealMineCell(i));
                
                minesGrid.appendChild(cell);
                minesGameState.grid.push('gem'); // Start with all gems
            }
            
            // Place mines randomly
            let minesPlaced = 0;
            while (minesPlaced < minesGameState.minesCount) {
                const randomIndex = Math.floor(Math.random() * 25);
                if (minesGameState.grid[randomIndex] === 'gem') {
                    minesGameState.grid[randomIndex] = 'mine';
                    minesPlaced++;
                }
            }
            
            minesPlayButton.disabled = false;
            minesCashoutButton.disabled = true;
            updateMinesMultiplier();
        }
        
        function updateMinesMultiplier() {
            if (minesGameState.revealed.length === 0) {
                minesGameState.multiplier = 1.0;
            } else {
                // Calculate multiplier based on formula: multiplier = (total tiles / safe tiles remaining)
                const safeTilesRemaining = 25 - minesGameState.minesCount - minesGameState.revealed.length;
                minesGameState.multiplier = 25 / (25 - minesGameState.minesCount) * 
                    (25 - minesGameState.revealed.length) / safeTilesRemaining;
            }
            
            minesMultiplier.textContent = `Multiplier: ${minesGameState.multiplier.toFixed(2)}x`;
            minesCashoutAmount.textContent = `Cashout: ${(minesGameState.betAmount * minesGameState.multiplier).toFixed(2)} SEE`;
        }
        
        function revealMineCell(index) {
            if (!minesGameState.gameActive || minesGameState.revealed.includes(index)) {
                return;
            }
            
            minesGameState.revealed.push(index);
            const cell = minesGrid.children[index];
            cell.classList.add('revealed');
            
            if (minesGameState.grid[index] === 'mine') {
                // Hit a mine - game over
                cell.innerHTML = '';
                cell.classList.add('mine');
                minesGameState.gameActive = false;
                minesCashoutButton.disabled = true;
                
                // Reveal all mines
                for (let i = 0; i < 25; i++) {
                    if (minesGameState.grid[i] === 'mine' && !minesGameState.revealed.includes(i)) {
                        const mineCell = minesGrid.children[i];
                        mineCell.innerHTML = '';
                        mineCell.classList.add('mine');
                        mineCell.classList.add('revealed');
                    }
                }
                
                // Record transaction
                recordTransaction('game', -minesGameState.betAmount, 'Mines game loss');
                
                setTimeout(() => {
                    alert('Game Over! You hit a mine.');
                    initializeMinesGame();
                }, 2000);
            } else {
                // Found a gem
                cell.innerHTML = '';
                cell.classList.add('gem');
                
                // Update multiplier
                updateMinesMultiplier();
                
                // Check if all gems are found
                const totalGems = 25 - minesGameState.minesCount;
                if (minesGameState.revealed.length === totalGems) {
                    // All gems found - auto cashout
                    cashoutMines();
                }
            }
        }
        
        function startMinesGame() {
            if (userBalance < minesGameState.betAmount) {
                alert('Insufficient balance!');
                return;
            }
            
            // Deduct from user and add to vault
            userBalance -= minesGameState.betAmount;
            adminVaultBalance += minesGameState.betAmount;
            updateBalance();
            
            minesGameState.gameActive = true;
            minesPlayButton.disabled = true;
            minesCashoutButton.disabled = false;
            minesGameState.multiplier = 1.0;
            updateMinesMultiplier();
        }
        
        function cashoutMines() {
            const winAmount = minesGameState.betAmount * minesGameState.multiplier;
            
            // Check if vault has enough funds
            if (adminVaultBalance < winAmount) {
                alert('Insufficient funds in vault!');
                return;
            }
            
            // Transfer from vault to user
            userBalance += winAmount;
            adminVaultBalance -= winAmount;
            updateBalance();
            
            minesCashoutButton.disabled = true;
            minesPlayButton.disabled = false;
            minesGameState.gameActive = false;
            
            // Record transaction
            recordTransaction('game', winAmount - minesGameState.betAmount, `Mines win with ${minesGameState.multiplier.toFixed(2)}x multiplier`);
            
            // Update winning users display
            updateWinningUsers(currentUser.name, winAmount - minesGameState.betAmount);
            
            setTimeout(() => {
                alert(`You cashed out ${winAmount.toFixed(2)} SEE!`);
                initializeMinesGame();
            }, 1000);
        }
        
        // Mines controls
        decreaseMines.addEventListener('click', () => {
            if (minesGameState.minesCount > 1) {
                minesGameState.minesCount--;
                minesCount.textContent = minesGameState.minesCount;
                generateMinesGrid();
            }
        });
        
        increaseMines.addEventListener('click', () => {
            if (minesGameState.minesCount < 24) {
                minesGameState.minesCount++;
                minesCount.textContent = minesGameState.minesCount;
                generateMinesGrid();
            }
        });
        
        decreaseBet.addEventListener('click', () => {
            if (minesGameState.betAmount > 0.20) {
                minesGameState.betAmount -= 0.10;
                minesBetAmountDisplay.textContent = `${minesGameState.betAmount.toFixed(2)} SEE`;
                updateMinesMultiplier();
            }
        });
        
        increaseBet.addEventListener('click', () => {
            if (minesGameState.betAmount < userBalance) {
                minesGameState.betAmount += 0.10;
                minesBetAmountDisplay.textContent = `${minesGameState.betAmount.toFixed(2)} SEE`;
                updateMinesMultiplier();
            }
        });
        
        // Update winning users display
        function updateWinningUsers(name, amount) {
            const winningUsers = document.getElementById('winningUsers');
            const userElement = document.createElement('div');
            userElement.className = 'winning-user';
            userElement.innerHTML = `
                <i class="fas fa-trophy"></i>
                <span>${name} won ${amount.toFixed(2)} SEE</span>
            `;
            
            winningUsers.appendChild(userElement);
            
            // Remove after 5 seconds
            setTimeout(() => {
                userElement.remove();
            }, 5000);
        }
        
        // Load all users for admin panel
        function loadAllUsers() {
            if (!isAdmin) return;
            
            usersList.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.7;">Loading users...</div>';
            
            db.collection('users').get()
                .then(snapshot => {
                    usersList.innerHTML = '';
                    
                    if (snapshot.empty) {
                        usersList.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.7;">No users registered yet</div>';
                        return;
                    }
                    
                    let totalBalance = 0;
                    snapshot.forEach(doc => {
                        const user = doc.data();
                        totalBalance += user.balance || 0;
                        
                        const userItem = document.createElement('div');
                        userItem.className = 'user-item';
                        userItem.innerHTML = `
                            <div class="user-info">
                                <div class="user-name">${user.name}</div>
                                <div class="user-email">${user.email}</div>
                            </div>
                            <div class="user-balance">${(user.balance || 0).toFixed(2)} SEE</div>
                            <div class="user-actions">
                                <button class="user-action" title="Add Coins" data-email="${user.email}">
                                    <i class="fas fa-coins"></i>
                                </button>
                                <button class="user-action" title="Ban User" data-email="${user.email}">
                                    <i class="fas fa-ban"></i>
                                </button>
                                <button class="user-action" title="Message User" data-email="${user.email}">
                                    <i class="fas fa-envelope"></i>
                                </button>
                            </div>
                        `;
                        
                        usersList.appendChild(userItem);
                    });
                    
                    // Update admin stats
                    document.getElementById('totalUsers').textContent = snapshot.size;
                    document.getElementById('totalBalance').textContent = `${totalBalance.toFixed(2)} SEE`;
                })
                .catch(error => {
                    console.error('Error loading users:', error);
                    usersList.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.7;">Error loading users</div>';
                });
        }
        
        // Add coins to user (admin function)
        function addCoinsToUser(email) {
            const amount = parseFloat(prompt(`Enter amount of SEE to add to ${email}:`));
            if (!amount || isNaN(amount) || amount <= 0) {
                alert('Invalid amount!');
                return;
            }
            
            // Check if vault has enough funds
            if (adminVaultBalance < amount) {
                alert('Insufficient funds in vault!');
                return;
            }
            
            // Find user and update balance
            db.collection('users').where('email', '==', email).get()
                .then(snapshot => {
                    if (snapshot.empty) {
                        alert('User not found!');
                        return;
                    }
                    
                    const userDoc = snapshot.docs[0];
                    const user = userDoc.data();
                    const newBalance = (user.balance || 0) + amount;
                    
                    // Update user balance
                    db.collection('users').doc(userDoc.id).update({
                        balance: newBalance
                    })
                    .then(() => {
                        // Update vault balance
                        adminVaultBalance -= amount;
                        updateBalance();
                        
                        // Record transaction for user
                        db.collection('transactions').add({
                            type: 'deposit',
                            amount: amount,
                            description: 'Admin credit',
                            timestamp: new Date(),
                            userId: userDoc.id
                        });
                        
                        alert(`Added ${amount} SEE to ${email}`);
                        loadAllUsers();
                    })
                    .catch(error => {
                        console.error('Error updating user balance:', error);
                        alert('Error adding coins to user');
                    });
                })
                .catch(error => {
                    console.error('Error finding user:', error);
                    alert('Error finding user');
                });
        }
        
        // Set coin price (admin function)
        function setCoinPrice() {
            const newPrice = parseFloat(prompt('Enter new SEE coin price in USD:'));
            if (!newPrice || isNaN(newPrice) || newPrice <= 0) {
                alert('Invalid price!');
                return;
            }
            
            coinPrice = newPrice;
            updateBalance();
            alert(`Coin price updated to $${coinPrice.toFixed(2)}`);
        }
        
        // Transfer coins between users
        function transferCoins() {
            const email = transferEmail.value.trim();
            const amount = parseFloat(transferAmount.value);
            const pin = transferPin.value;
            
            if (!email || !amount || !pin) {
                alert('Please fill in all fields');
                return;
            }
            
            if (amount < 1) {
                alert('Minimum transfer amount is 1 SEE');
                return;
            }
            
            if (userBalance < amount) {
                alert('Insufficient balance');
                return;
            }
            
            if (pin !== currentUser.pin) {
                alert('Invalid PIN');
                return;
            }
            
            // Find recipient
            db.collection('users').where('email', '==', email).get()
                .then(snapshot => {
                    if (snapshot.empty) {
                        alert('Recipient not found');
                        return;
                    }
                    
                    const recipientDoc = snapshot.docs[0];
                    const recipient = recipientDoc.data();
                    
                    if (recipient.banned) {
                        alert('Cannot transfer to banned user');
                        return;
                    }
                    
                    // Update sender balance
                    const newSenderBalance = userBalance - amount;
                    db.collection('users').doc(currentUser.uid).update({
                        balance: newSenderBalance
                    })
                    .then(() => {
                        // Update recipient balance
                        const newRecipientBalance = (recipient.balance || 0) + amount;
                        db.collection('users').doc(recipientDoc.id).update({
                            balance: newRecipientBalance
                        })
                        .then(() => {
                            // Update local balance
                            userBalance = newSenderBalance;
                            updateBalance();
                            
                            // Record transactions
                            recordTransaction('transfer', -amount, `Transfer to ${email}`, email);
                            
                            db.collection('transactions').add({
                                type: 'transfer',
                                amount: amount,
                                description: `Transfer from ${currentUser.email}`,
                                timestamp: new Date(),
                                userId: recipientDoc.id
                            });
                            
                            alert(`Successfully transferred ${amount} SEE to ${email}`);
                            
                            // Clear form
                            transferEmail.value = '';
                            transferAmount.value = '';
                            transferPin.value = '';
                        })
                        .catch(error => {
                            console.error('Error updating recipient balance:', error);
                            alert('Error completing transfer');
                        });
                    })
                    .catch(error => {
                        console.error('Error updating sender balance:', error);
                        alert('Error processing transfer');
                    });
                })
                .catch(error => {
                    console.error('Error finding recipient:', error);
                    alert('Error finding recipient');
                });
        }
        
        // Event Listeners for Navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                switchTab(tab.dataset.tab);
            });
        });
        
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                switchBottomNav(item.dataset.nav);
            });
        });
        
        // Transaction tabs
        document.querySelectorAll('.transaction-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.transaction-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                // In a real app, you would filter transactions by type
                loadTransactions();
            });
        });
        
        // Game card clicks
        document.querySelectorAll('.game-card').forEach(card => {
            card.addEventListener('click', () => {
                const gameName = card.dataset.game;
                startGame(gameName);
            });
        });
        
        // Game controls
        minesPlayButton.addEventListener('click', startMinesGame);
        minesCashoutButton.addEventListener('click', cashoutMines);
        minesBackBtn.addEventListener('click', exitGame);
        
        // Transfer
        transferButton.addEventListener('click', transferCoins);
        
        // Copy referral code
        copyReferralBtn.addEventListener('click', () => {
            userReferralCode.select();
            document.execCommand('copy');
            alert('Referral code copied to clipboard!');
        });
        
        // Claim referral bonus
        claimReferralBtn.addEventListener('click', () => {
            if (currentUser.referrals && currentUser.referrals.length >= 10) {
                // Check if vault has enough funds
                if (adminVaultBalance < 3) {
                    alert('Insufficient funds in vault!');
                    return;
                }
                
                // Update user balance
                const newBalance = userBalance + 3;
                db.collection('users').doc(currentUser.uid).update({
                    balance: newBalance
                })
                .then(() => {
                    // Update vault
                    adminVaultBalance -= 3;
                    
                    // Update local balance
                    userBalance = newBalance;
                    updateBalance();
                    
                    // Record transaction
                    recordTransaction('bonus', 3, 'Referral bonus');
                    
                    alert('Referral bonus of 3 SEE has been added to your account!');
                })
                .catch(error => {
                    console.error('Error adding referral bonus:', error);
                    alert('Error claiming referral bonus');
                });
            }
        });
        
        // Admin user actions
        usersList.addEventListener('click', (e) => {
            if (e.target.closest('.user-action')) {
                const button = e.target.closest('.user-action');
                const email = button.dataset.email;
                
                if (button.querySelector('.fa-coins')) {
                    addCoinsToUser(email);
                } else if (button.querySelector('.fa-ban')) {
                    if (confirm(`Are you sure you want to ban ${email}?`)) {
                        // Ban user logic would go here
                        alert('User banned successfully');
                    }
                } else if (button.querySelector('.fa-envelope')) {
                    const message = prompt(`Enter message to send to ${email}:`);
                    if (message) {
                        // Send message logic would go here
                        alert('Message sent successfully');
                    }
                }
            }
        });
        
        // Admin actions
        addCoinsBtn.addEventListener('click', () => {
            const email = prompt('Enter user email:');
            if (email) {
                addCoinsToUser(email);
            }
        });
        
        banUserBtn.addEventListener('click', () => {
            const email = prompt('Enter user email to ban:');
            if (email) {
                if (confirm(`Are you sure you want to ban ${email}?`)) {
                    // Ban user logic would go here
                    alert('User banned successfully');
                }
            }
        });
        
        messageUserBtn.addEventListener('click', () => {
            const email = prompt('Enter user email:');
            if (email) {
                const message = prompt('Enter message:');
                if (message) {
                    // Send message logic would go here
                    alert('Message sent successfully');
                }
            }
        });
        
        setPriceBtn.addEventListener('click', setCoinPrice);
        
        // Auth Event Listeners
        showRegister.addEventListener('click', (e) => {
            e.preventDefault();
            showScreen(registerScreen);
        });
        
        showLogin.addEventListener('click', (e) => {
            e.preventDefault();
            showScreen(loginScreen);
        });
        
        showAdminLogin.addEventListener('click', (e) => {
            e.preventDefault();
            showScreen(adminLoginScreen);
        });
        
        showUserLogin.addEventListener('click', (e) => {
            e.preventDefault();
            showScreen(loginScreen);
        });
        
        // Login function
        loginButton.addEventListener('click', () => {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }
            
            showLoading(loginButton, loginButtonText, loginButtonSpinner);
            
            // Check if admin login
            if (email === 'ebubechichukwu8@gmail.com' && password === 'Ebube@123') {
                isAdmin = true;
                showScreen(adminPanel);
                loadAllUsers();
                hideLoading(loginButton, loginButtonText, loginButtonSpinner);
                return;
            }
            
            // Firebase authentication
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    
                    // Get user data from Firestore
                    return db.collection('users').doc(user.uid).get();
                })
                .then((doc) => {
                    if (doc.exists) {
                        const userData = doc.data();
                        
                        if (userData.banned) {
                            alert('Your account has been banned');
                            auth.signOut();
                            hideLoading(loginButton, loginButtonText, loginButtonSpinner);
                            return;
                        }
                        
                        currentUser = {
                            uid: doc.id,
                            ...userData
                        };
                        userBalance = userData.balance || 0;
                        
                        updateBalance();
                        updateProfile();
                        showScreen(appScreen);
                    } else {
                        alert('User data not found');
                    }
                    hideLoading(loginButton, loginButtonText, loginButtonSpinner);
                })
                .catch((error) => {
                    console.error('Login error:', error);
                    alert('Login failed: ' + error.message);
                    hideLoading(loginButton, loginButtonText, loginButtonSpinner);
                });
        });
        
        // Register function
        registerButton.addEventListener('click', () => {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            const pin = document.getElementById('registerPin').value;
            const age = document.getElementById('registerAge').value;
            const country = document.getElementById('registerCountry').value;
            const referralCode = document.getElementById('referralCodeInput').value;
            
            if (!name || !email || !password || !confirmPassword || !pin || !age || !country) {
                alert('Please fill in all required fields');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            
            if (pin.length !== 4 || isNaN(pin)) {
                alert('PIN must be 4 digits');
                return;
            }
            
            if (parseInt(age) < 17) {
                alert('You must be at least 17 years old to register');
                return;
            }
            
            showLoading(registerButton, registerButtonText, registerButtonSpinner);
            
            // Firebase registration
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    const referralCode = generateReferralCode();
                    
                    // Create user document in Firestore
                    return db.collection('users').doc(user.uid).set({
                        name: name,
                        email: email,
                        pin: pin,
                        age: parseInt(age),
                        country: country,
                        balance: 0,
                        referralCode: referralCode,
                        referrals: [],
                        banned: false,
                        createdAt: new Date()
                    });
                })
                .then(() => {
                    alert('Registration successful! Please login.');
                    showScreen(loginScreen);
                    hideLoading(registerButton, registerButtonText, registerButtonSpinner);
                })
                .catch((error) => {
                    console.error('Registration error:', error);
                    alert('Registration failed: ' + error.message);
                    hideLoading(registerButton, registerButtonText, registerButtonSpinner);
                });
        });
        
        // Admin login
        adminLoginButton.addEventListener('click', () => {
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            
            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }
            
            showLoading(adminLoginButton, adminLoginButtonText, adminLoginButtonSpinner);
            
            if (email === 'ebubechichukwu8@gmail.com' && password === 'Ebube@123') {
                isAdmin = true;
                showScreen(adminPanel);
                loadAllUsers();
            } else {
                alert('Invalid admin credentials!');
            }
            
            hideLoading(adminLoginButton, adminLoginButtonText, adminLoginButtonSpinner);
        });
        
        // Logout functions
        logoutButton.addEventListener('click', () => {
            if (confirm('Are you sure you want to logout?')) {
                auth.signOut().then(() => {
                    currentUser = null;
                    userBalance = 0;
                    showScreen(loginScreen);
                });
            }
        });
        
        adminLogoutButton.addEventListener('click', () => {
            if (confirm('Are you sure you want to logout from admin panel?')) {
                isAdmin = false;
                showScreen(loginScreen);
            }
        });
        
        // Initialize app
        showScreen(loginScreen);
        
        // Check if user is already logged in
        auth.onAuthStateChanged((user) => {
            if (user && !isAdmin) {
                // User is signed in, get user data
                db.collection('users').doc(user.uid).get()
                    .then((doc) => {
                        if (doc.exists) {
                            const userData = doc.data();
                            
                            if (userData.banned) {
                                alert('Your account has been banned');
                                auth.signOut();
                                return;
                            }
                            
                            currentUser = {
                                uid: doc.id,
                                ...userData
                            };
                            userBalance = userData.balance || 0;
                            
                            updateBalance();
                            updateProfile();
                            showScreen(appScreen);
                        }
                    })
                    .catch((error) => {
                        console.error('Error getting user data:', error);
                    });
            }
        });
    </script>
</body>
</html>
